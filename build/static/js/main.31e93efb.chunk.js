(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{127:function(e,t,a){e.exports=a.p+"static/media/arrow_forward copy.f08e2ed1.svg"},130:function(e,t,a){e.exports=a.p+"static/media/minus.29099d25.svg"},131:function(e,t,a){e.exports=a.p+"static/media/plus.6cf8e4ac.svg"},168:function(e,t,a){e.exports=a.p+"static/media/logout.f3d39002.svg"},169:function(e,t,a){e.exports=a.p+"static/media/catalog.6875f34e.svg"},170:function(e,t,a){e.exports=a.p+"static/media/products.5f6279cb.svg"},171:function(e,t,a){e.exports=a.p+"static/media/dashboard.927998d6.svg"},172:function(e,t,a){e.exports=a.p+"static/media/user_management.1ec7664e.svg"},173:function(e,t,a){e.exports=a.p+"static/media/activity.4b323d7f.svg"},174:function(e,t,a){e.exports=a.p+"static/media/close.3fb914fb.svg"},179:function(e,t,a){e.exports=a.p+"static/media/off.d35a9a84.svg"},180:function(e,t,a){e.exports=a.p+"static/media/on.4bcdbc55.svg"},184:function(e,t,a){e.exports=a.p+"static/media/ok.52875933.svg"},185:function(e,t,a){e.exports=a.p+"static/media/no.a557581d.svg"},186:function(e,t,a){e.exports=a.p+"static/media/roll_down.c0955da8.svg"},187:function(e,t,a){e.exports=a.p+"static/media/sort_up.f3f8f276.svg"},188:function(e,t,a){e.exports=a.p+"static/media/sort_down.74b0b00d.svg"},190:function(e,t,a){e.exports=a.p+"static/media/email.d4fe1dd5.svg"},191:function(e,t,a){e.exports=a.p+"static/media/password.32f5b2c7.svg"},192:function(e,t,a){e.exports=a.p+"static/media/graph.9494cf59.png"},199:function(e,t,a){e.exports=a(372)},207:function(e,t,a){},230:function(e,t,a){},232:function(e,t,a){},235:function(e,t,a){},242:function(e,t,a){},247:function(e,t,a){},257:function(e,t,a){},259:function(e,t,a){},261:function(e,t,a){},263:function(e,t,a){},362:function(e,t,a){},364:function(e,t,a){},366:function(e,t,a){},368:function(e,t,a){},370:function(e,t,a){},372:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(21),l=a.n(o),c=a(7),s=a(5),i=a(58),u=a(62),m=a(87),p=a(166),d=a(125),E=a.n(d);var g=(window.location.host,"http://localhost:8000/api/v0"),y={default:{client:E.a.create({baseURL:g,responseType:"json"})},second:{client:E.a.create({baseURL:"",responseType:"json"})}},h=(a(230),a(167)),v=function(e){return n.a.createElement(h.Context.Provider,null,e.children)},b=a(407),f=a(373),_=a(404),N=a(10),S=a(11),C=a(13),k=a(12),w=a(14),T=a(168),q=a.n(T),O=(a(232),function(e){function t(){var e,a;Object(N.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(n)))).handleOut=function(){var e=a.props.history;localStorage.clear(),e.push("/auth/sign-in")},a}return Object(w.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=localStorage.username,t=localStorage.email;return n.a.createElement("header",{className:"header_wrapper"},n.a.createElement("div",null,n.a.createElement("div",{className:"name"},e),n.a.createElement("div",{className:"email"},t)),n.a.createElement("button",{className:"logout",onClick:this.handleOut},n.a.createElement("img",{src:q.a,alt:"logout"})))}}]),t}(r.Component));var D=Object(c.c)(function(e){return{}},function(e){return Object(s.b)({},e)})(O),x=a(209),j=a(394),A=a(98),P=a.n(A),I=a(169),R=a.n(I),Q=a(170),U=a.n(Q),L=a(171),F=a.n(L),G=a(172),M=a.n(G),Y=a(173),V=a.n(Y),H=(a(207),function(e){function t(){var e,a;Object(N.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(n)))).state={reloading:!1},a}return Object(w.a)(t,e),Object(S.a)(t,[{key:"componentDidUpdate",value:function(e){e.location!==this.props.location&&this.setState({reloading:!0})}},{key:"render",value:function(){var e=localStorage.role;return n.a.createElement("div",{className:"panel_wrapper"},n.a.createElement("div",{className:"panel"},n.a.createElement(x.a,{to:"/main/dashboard",className:"logo_panel"},n.a.createElement("img",{src:P.a,alt:"logo_sidebar"})),n.a.createElement("div",{className:"block_link"},"user"!==e&&n.a.createElement(j.a,{to:"/main/dashboard"},n.a.createElement("img",{src:F.a,alt:"dashboard"})),"user"!==e&&n.a.createElement(j.a,{to:"/main/catalog"},n.a.createElement("img",{src:R.a,alt:"catalog"})),n.a.createElement(j.a,{to:"/main/stock-management"},n.a.createElement("img",{src:U.a,alt:"products"})),"clinic"===e&&n.a.createElement(j.a,{to:"/main/user-management"},n.a.createElement("img",{src:M.a,alt:"user_management"})),"user"!==e&&n.a.createElement(j.a,{to:"/main/activity"},n.a.createElement("img",{src:V.a,alt:"activity"})))))}}]),t}(r.Component));var B=Object(c.c)(function(e){return{}},{})(H),W=a(73),K=a(398),Z=(a(235),a(174)),z=a.n(Z),$=function(e){var t=e.open,a=e.onClose,r=e.children,o=e.longDialog,l=e.onClick;return n.a.createElement(K.a,{open:t,onClose:a,classes:{root:"default_dialog_root",paper:"paper_custom_dialog"}},n.a.createElement("div",{onClick:l,className:o?"dialog_wrapper dialog_wrapper_long":"dialog_wrapper"},n.a.createElement("button",{onClick:a,className:"dialog_close_button"},n.a.createElement("img",{src:z.a,alt:"close icon"})),r))},J=a(175),X=(a(242),function(){return n.a.createElement("div",{className:"loaderWrapper"},n.a.createElement(J.MetroSpinner,{size:70,color:"#686769",loading:!0}))}),ee=a(176),te=a.n(ee),ae=a(177),re=a.n(ae),ne=a(178),oe=a.n(ne),le=(a(247),function(e){var t=e.active,a=e.pageCount,r=(e.pageItemsCount,e.commentTotalCount,e.onChange);return n.a.createElement("div",{className:"pagination-container"},n.a.createElement(te.a,{forcePage:t,onPageChange:r,pageCount:a,pageRangeDisplayed:2,marginPagesDisplayed:1,previousLabel:n.a.createElement(re.a,null),nextLabel:n.a.createElement(oe.a,null),containerClassName:"pagination-list",pageClassName:"pagination-item",pageLinkClassName:"pagination-link",activeLinkClassName:"pagination-link-active",breakClassName:"pagination-ellipsis"}))}),ce=a(402),se=(a(256),a(43)),ie=a.n(se),ue=a(179),me=a.n(ue),pe=a(180),de=a.n(pe),Ee=(a(257),"REGISTER_FIRST_STEP"),ge="REGISTER_SECOND_STEP",ye="LOGIN",he="RESET_PASSWORD",ve="CHANGE_PASSWORD",be="SEND_MESSAGE",fe="GET_USERS_LIST",_e="PATCH_USER",Ne="POST_ADD_USER",Se="DELETE_USER",Ce="RESET_USER_ERROR",ke="GET_STOCK",we="SEARCH_STOCK",Te="PATCH_QUANTITY",qe="POST_REQUEST",Oe="GET_CLINIC_LOG",De="GET_CLINIC_DASH_BOARD",xe="GET_ACTIVITY",je="PAGINATE",Ae="GET_CAT",Pe="GET_CURRENT_CAT",Ie="POST_CAT",Re="PUT_CAT",Qe="DELETE_CAT",Ue="GET_SUB_CAT",Le="PUT_PRODUCT",Fe="DELETE_PRODUCT",Ge="CHECK_STOCKS",Me="GET_PRODS_FOR_STOCKS",Ye="CREATE_INVENTORY",Ve="PATCH_INVENTORY";function He(e){return{type:Ie,payload:{client:"default",request:{url:"/subcategory/",method:"POST",data:e}}}}function Be(){return{type:Ae,payload:{client:"default",request:{url:"/categories/",method:"GET"}}}}function We(e,t){return{type:Re,payload:{client:"default",request:{url:"/subcategory/".concat(e,"/"),method:"PUT",data:t}}}}function Ke(e){return{type:Qe,payload:{client:"default",request:{url:"/subcategory/".concat(e),method:"DELETE"}}}}function Ze(e){return{type:Ue,payload:{client:"default",request:{url:"/subcategories/".concat(e,"/"),method:"GET"}}}}function ze(e){return{type:Pe,payload:{client:"default",request:{url:"/subcategory/".concat(e,"/"),method:"GET"}}}}function $e(e){return{type:Ue,payload:{client:"default",request:{url:"/product/",method:"POST",data:e}}}}function Je(e,t){return{type:Le,payload:{client:"default",request:{url:"/product/".concat(e,"/"),method:"PUT",data:t}}}}function Xe(e){return{type:Fe,payload:{client:"default",request:{url:"/product/".concat(e),method:"DELETE"}}}}function et(e,t){return{type:je,payload:{client:"default",request:{url:"/".concat(t?"subcategories/"+t:"categories/","?page=").concat(e),method:"GET"}}}}function tt(e){return{type:Me,payload:{client:"default",request:{url:"/subcategory/products/",method:"GET"}}}}function at(e){return{type:Ge,payload:{client:"default",request:{url:"/product/".concat(e,"/"),method:"GET"}}}}function rt(e){return{type:Ye,payload:{client:"default",request:{url:"/inventory/",method:"POST",data:e}}}}function nt(e,t){return{type:Ve,payload:{client:"default",request:{url:"/inventory/".concat(e,"/"),method:"PATCH",data:t}}}}var ot=function(e){function t(){var e,a;Object(N.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(n)))).state={openDeleteDialog:!1,openEditDialog:!1,openAddDialog:!1,openAddStockDialog:!1,openAddProductDialog:!1,openAddStockCustomDialog:!1,items:[[],[]],categoryProducts:[],filteredProds:[],currentCatName:"",parentCatId:!1,prevCatName:[],prevCatId:[],targetId:"",newItemType:"",newCategoryName:"",newProductPrice:"",currentItemName:"",currentItemPrice:"",newProdName:"",activePage:1,totalItemsCount:0,totalPagesCount:0,next:"",prev:"",reloading:!1,loading:!0,nameError:!1,priceError:!1,quantityError:!1,supplyQuantityError:!1,minSupplyQuantityError:!1,nameErrorText:"",priceErrorText:"",quantityErrorText:"",supplyQuantityErrorText:"",minSupplyQuantityErrorText:"",quantity:"",autoSup:!1,supply_quantity:"",min_supply_quantity:"",newStock:!1,inventoryId:""},a.toggleDeleteDialog=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];a.setState(function(e){return{openDeleteDialog:!e.openDeleteDialog}})},a.toggleEditDialog=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];a.setState(function(e){var t=e.openEditDialog,a=e.nameError,r=e.priceError,n=e.nameErrorText,o=e.priceErrorText,l=e.quantityError,c=e.supplyQuantityError,s=e.minSupplyQuantityError,i=e.quantityErrorText,u=e.supplyQuantityErrorText,m=e.minSupplyQuantityErrorText;return{openEditDialog:!t,nameError:t?!a:a,priceError:t?!r:r,nameErrorText:t?"":n,priceErrorText:t?"":o,quantityError:t?!l:l,supplyQuantityError:t?!c:c,minSupplyQuantityError:t?!s:s,quantityErrorText:t?"":i,supplyQuantityErrorText:t?"":u,minSupplyQuantityErrorText:t?"":m}})},a.toggleAddDialog=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];a.setState(function(e){var t=e.openAddDialog,a=e.nameError,r=e.priceError,n=e.nameErrorText,o=e.priceErrorText,l=e.quantityError,c=e.supplyQuantityError,s=e.minSupplyQuantityError,i=e.quantityErrorText,u=e.supplyQuantityErrorText,m=e.minSupplyQuantityErrorText;return{openAddDialog:!t,nameError:t?!a:a,priceError:t?!r:r,nameErrorText:t?"":n,priceErrorText:t?"":o,quantityError:t?!l:l,supplyQuantityError:t?!c:c,minSupplyQuantityError:t?!s:s,quantityErrorText:t?"":i,supplyQuantityErrorText:t?"":u,minSupplyQuantityErrorText:t?"":m}})},a.toggleStockDialog=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];a.setState(function(e){var t=e.openAddStockDialog,a=e.openAddProductDialog,r=e.nameError,n=e.priceError,o=e.nameErrorText,l=e.priceErrorText,c=e.quantityError,s=e.supplyQuantityError,i=e.minSupplyQuantityError,u=e.quantityErrorText,m=e.supplyQuantityErrorText,p=e.minSupplyQuantityErrorText;return{openAddStockDialog:!t,openAddProductDialog:a?!a:a,nameError:t?!r:r,priceError:t?!n:n,nameErrorText:t?"":o,priceErrorText:t?"":l,quantityError:t?!c:c,supplyQuantityError:t?!s:s,minSupplyQuantityError:t?!i:i,quantityErrorText:t?"":u,supplyQuantityErrorText:t?"":m,minSupplyQuantityErrorText:t?"":p}})},a.toggleStockCustomDialog=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];a.setState(function(e){var t=e.openAddStockCustomDialog,a=e.openAddProductDialog,r=e.nameError,n=e.priceError,o=e.nameErrorText,l=e.priceErrorText,c=e.quantityError,s=e.supplyQuantityError,i=e.minSupplyQuantityError,u=e.quantityErrorText,m=e.supplyQuantityErrorText,p=e.minSupplyQuantityErrorText;return{openAddStockCustomDialog:!t,openAddProductDialog:a?!a:a,quantity:"",currentItemPrice:"",nameError:t?!r:r,priceError:t?!n:n,nameErrorText:t?"":o,priceErrorText:t?"":l,quantityError:t?!c:c,supplyQuantityError:t?!s:s,minSupplyQuantityError:t?!i:i,quantityErrorText:t?"":u,supplyQuantityErrorText:t?"":m,minSupplyQuantityErrorText:t?"":p}})},a.toggleAddProductDialog=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];a.setState(function(e){var t=e.openAddProductDialog,a=e.nameError,r=e.priceError,n=e.nameErrorText,o=e.priceErrorText,l=e.quantityError,c=e.supplyQuantityError,s=e.minSupplyQuantityError,i=e.quantityErrorText,u=e.supplyQuantityErrorText,m=e.minSupplyQuantityErrorText;return{openAddProductDialog:!t,filteredProds:[],nameError:t?!a:a,priceError:t?!r:r,nameErrorText:t?"":n,priceErrorText:t?"":o,quantityError:t?!l:l,supplyQuantityError:t?!c:c,minSupplyQuantityError:t?!s:s,quantityErrorText:t?"":i,supplyQuantityErrorText:t?"":u,minSupplyQuantityErrorText:t?"":m}})},a.onTypeAction=function(e){for(var t=a.state.categoryProducts,r=[],n=0;n<t.length;n++){if(e.target.value.length<1?r=[]:t[n].name.toLowerCase().includes(e.target.value.toLowerCase())&&r.push(t[n]),t[n].name.toLowerCase()===e.target.value.toLowerCase()){console.log(t[n],"\u043e\u0448\u0438\u0431\u043a\u0430"),a.setState({nameError:!0,nameErrorText:"Product with the same name already exists in this category/subcategory."});break}console.log("\u043d\u0435\u0442 \u043e\u0448\u0438\u0431\u043a\u0438"),a.setState({nameError:!1,nameErrorText:""})}a.setState({newProdName:e.target.value,filteredProds:r})},a.clearSearch=function(){a.setState({filteredProds:[]})},a.newCategoryName=function(e){a.setState({newCategoryName:e.target.value,currentItemName:e.target.value})},a.newProductPrice=function(e){a.setState({newProductPrice:e.target.value,currentItemPrice:e.target.value})},a.getCategoriesProducts=function(){(0,a.props.getProdsForStocks)().then(function(e){e.payload&&e.payload.status&&200===e.payload.status&&a.setState({categoryProducts:e.payload.data})})},a.getCategories=function(){var e=a.props.getCat,t=[],r=[],n=[],o="",l="",c=0,s=0;a.setState({loading:!0}),e().then(function(e){e.payload&&e.payload.status&&200===e.payload.status&&(t=e.payload.data.results,o=e.payload.data.next,l=e.payload.data.previous,c=e.payload.data.total_pages,s=e.payload.data.count,t.map(function(e,t){e.is_product?n.push(e):r.push(e)}),a.setState({items:[r,[]],parentCatId:!1,totalItemsCount:s,totalPagesCount:c,next:o,prev:l,prevCatId:[],prevCatName:[],activePage:1,currentCatName:!1}),a.endLoading())})},a.getSubcat=function(e){var t=a.props.getSubcat,r=[],n=[],o=[],l="",c="",s=0,i=0;a.setState({loading:!0}),t(e).then(function(e){e.payload&&e.payload.status&&200===e.payload.status?(r=e.payload.data.results,l=e.payload.data.next,c=e.payload.data.previous,s=e.payload.data.total_pages,i=e.payload.data.count,r.map(function(e,t){e.is_product?o.push(e):n.push(e)}),a.setState({items:[n,o],totalItemsCount:i,totalPagesCount:s,next:l,prev:c,activePage:1}),a.endLoading()):(a.setState({items:[[],[]],totalItemsCount:0,totalPagesCount:0,next:!1,prev:!1,activePage:1}),a.endLoading())})},a.addNewItem=function(e){switch(a.setState({newItemType:e}),e){case"cat":a.toggleAddDialog();break;case"prod":a.getCategoriesProducts(),a.toggleAddProductDialog();break;default:a.toggleAddDialog()}},a.addClick=function(e){var t=a.state.newItemType;switch(t){case"cat":a.addNewCat();break;case"sub":a.addNewCat(a.state.parentCatId);break;case"prod":a.addNewProd(e);break;default:console.log("\u0422\u0430\u043a\u043e\u0435 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u0435\u043b\u044c\u0437\u044f",t)}},a.addNewCat=function(e){var t=a.state,r=t.newCategoryName,n=(t.parentCatId,{name:r}),o=a.props.history.location.pathname,l=(a.state.items,o.split("/")[o.split("/").length-1],a.props.addCat);void 0!==e&&(n.subcategory_id=e),l(n).then(function(e){e.payload&&e.payload.status&&201===e.payload.status?(a.getCurrentCat(e.payload.data.id),a.redirect(e.payload.data.id),a.endLoading(),a.toggleAddDialog()):e.error.response.data.name&&e.error.response.data.price?a.setState({nameError:!0,priceError:!0,nameErrorText:e.error.response.data.name,priceErrorText:e.error.response.data.price}):e.error.response.data.name?a.setState({nameError:!0,priceError:!1,nameErrorText:e.error.response.data.name,priceErrorText:""}):e.error.response.data.price&&a.setState({nameError:!1,priceError:!0,nameErrorText:"",priceErrorText:e.error.response.data.price})})},a.addNewProd=function(e){var t=a.props,r=t.addProduct,n=t.history.location.pathname,o=a.state,l=o.newCategoryName,c=o.newProductPrice,s=o.parentCatId,i=o.totalPagesCount,u=o.quantity,m=o.newProdName,p={price:+c,subcategory_id:s},d=a.state.items,E=n.split("/")[n.split("/").length-1];e?(p.name=m,p.quantity=u):p.name=l,r(p).then(function(e){e.payload&&e.payload.status&&201===e.payload.status?(d[0].length+d[1].length<10?(d[1].push(e.payload.data),a.setState({items:d,openDeleteDialog:!1,openEditDialog:!1,openAddDialog:!1,openAddStockDialog:!1,openAddProductDialog:!1,openAddStockCustomDialog:!1,quantity:"",autoSup:!1,supply_quantity:"",min_supply_quantity:"",newProductPrice:"",currentItemPrice:"",quantityError:!1,quantityErrorText:""})):(a.getCurrentCat(E),a.changePage(!1,i)),a.endLoading()):e.error.response.data.name&&e.error.response.data.price?a.setState({nameError:!0,priceError:!0,nameErrorText:e.error.response.data.name,priceErrorText:e.error.response.data.price,quantityError:!1,quantityErrorText:""}):e.error.response.data.name?a.setState({nameError:!0,priceError:!1,nameErrorText:e.error.response.data.name,priceErrorText:"",quantityError:!1,quantityErrorText:""}):e.error.response.data.price?a.setState({nameError:!1,priceError:!0,nameErrorText:"",priceErrorText:e.error.response.data.price,quantityError:!1,quantityErrorText:""}):e.error.response.data.quantity&&a.setState({quantityError:!0,quantityErrorText:e.error.response.data.quantity,nameError:!1,priceError:!1,nameErrorText:"",priceErrorText:""})})},a.editItem=function(e,t,r,n){a.setState({newItemType:e,targetId:t,currentItemName:r,currentItemPrice:n,newProductPrice:n,newCategoryName:r}),a.toggleEditDialog()},a.editClick=function(){var e=a.state.newItemType;switch(e){case"cat":case"sub":a.editCat();break;case"prod":a.editProd();break;default:console.log("\u0422\u0430\u043a\u043e\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0435\u043b\u044c\u0437\u044f",e)}},a.editCat=function(){var e=a.state,t=e.newCategoryName,r=e.targetId,n=e.parentCatId,o={name:t},l=a.props.history.location.pathname,c=(a.state.items,l.split("/")[l.split("/").length-1]),s=a.props.editCat;"sub"===a.state.newItemType&&(o.subcategory_id=n),s(r,o).then(function(e){e.payload&&e.payload.status&&200===e.payload.status?("catalog"===c?a.getCategories():(a.getCurrentCat(n),a.getSubcat(n)),a.endLoading(),a.toggleEditDialog()):e.error.response.data.name&&e.error.response.data.price?a.setState({nameError:!0,priceError:!0,nameErrorText:e.error.response.data.name,priceErrorText:e.error.response.data.price}):e.error.response.data.name?a.setState({nameError:!0,priceError:!1,nameErrorText:e.error.response.data.name,priceErrorText:""}):e.error.response.data.price&&a.setState({nameError:!1,priceError:!0,nameErrorText:"",priceErrorText:e.error.response.data.price})})},a.editProd=function(){var e=a.state,t=e.newCategoryName,r=e.newProductPrice,n=e.targetId,o=e.parentCatId,l={name:t,price:r,subcategory_id:o},c=(a.props.history.location.pathname,a.props.editProd);console.log(l),c(n,l).then(function(e){e.payload&&e.payload.status&&200===e.payload.status?(a.getCurrentCat(o),a.getSubcat(o),a.endLoading(),a.toggleEditDialog()):e.error.response.data.name&&e.error.response.data.price?a.setState({nameError:!0,priceError:!0,nameErrorText:e.error.response.data.name,priceErrorText:e.error.response.data.price}):e.error.response.data.name?a.setState({nameError:!0,priceError:!1,nameErrorText:e.error.response.data.name,priceErrorText:""}):e.error.response.data.price&&a.setState({nameError:!1,priceError:!0,nameErrorText:"",priceErrorText:e.error.response.data.price})})},a.deleteItem=function(e,t,r){a.setState({newItemType:e,targetId:t,currentItemName:r}),a.toggleDeleteDialog()},a.deleteClick=function(){switch(a.state.newItemType){case"cat":case"sub":a.deleteCat();break;case"prod":a.deleteProd()}},a.deleteProd=function(){var e=a.state,t=e.targetId,r=e.parentCatId;a.props.history.location.pathname;(0,a.props.deleteProd)(t).then(function(e){e.payload&&e.payload.status&&200===e.payload.status&&(a.getCurrentCat(r),a.getSubcat(r),a.endLoading(),a.toggleDeleteDialog())})},a.deleteCat=function(){var e=a.state,t=e.targetId,r=e.parentCatId,n=a.props.history.location.pathname,o=n.split("/")[n.split("/").length-1];(0,a.props.deleteCat)(t).then(function(e){e.payload&&e.payload.status&&200===e.payload.status&&("catalog"===o?a.getCategories():(a.getCurrentCat(r),a.getSubcat(r)),a.endLoading(),a.toggleDeleteDialog())})},a.autoSupOn=function(){a.setState({autoSup:!0})},a.autoSupOff=function(){a.setState({autoSup:!1})},a.checkStocks=function(e){var t=a.props.checkStocks;a.setState({targetId:e}),t(e).then(function(e){e.payload&&e.payload.status&&200===e.payload.status?(a.setState({quantity:e.payload.data.quantity,autoSup:e.payload.data.auto_supply,supply_quantity:e.payload.data.supply_quantity,min_supply_quantity:e.payload.data.min_supply_quantity,newStock:!1,inventoryId:e.payload.data.inventory_id}),a.toggleStockDialog()):404===e.error.response.status&&(a.setState({inventoryId:!1,supply_quantity:!1,min_supply_quantity:!1,quantity:!1,autoSup:!1,newStock:!0}),a.toggleStockDialog())})},a.newQuantity=function(e){a.setState({quantity:e.target.value})},a.newSupplyQuantity=function(e){a.setState({supply_quantity:e.target.value})},a.newMinSupplyQuantity=function(e){a.setState({min_supply_quantity:e.target.value})},a.addToStock=function(){var e=a.state,t=e.targetId,r=e.quantity,n=e.autoSup,o=e.supply_quantity,l=e.min_supply_quantity,c=e.newStock,s=e.inventoryId,i=a.props,u=i.createInventory,m=i.patchInventory,p={auto_supply:n};r&&(p.quantity=+r),o&&(p.supply_quantity=+o),l&&(p.min_supply_quantity=+l),c?(p.product_id=t,u(p).then(function(e){e.payload&&e.payload.status&&201===e.payload.status?(a.setState({quantityError:!1,quantityErrorText:"",supplyQuantityError:!1,supplyQuantityErrorText:"",minSupplyQuantityError:!1,minSupplyQuantityErrorText:""}),a.toggleStockDialog()):e.error.response.data.quantity?a.setState({quantityError:!0,quantityErrorText:e.error.response.data.quantity,supplyQuantityError:!1,supplyQuantityErrorText:"",minSupplyQuantityError:!1,minSupplyQuantityErrorText:""}):e.error.response.data.supply_quantity?a.setState({supplyQuantityError:!0,supplyQuantityErrorText:e.error.response.data.supply_quantity,quantityError:!1,quantityErrorText:"",minSupplyQuantityError:!1,minSupplyQuantityErrorText:""}):e.error.response.data.min_supply_quantity&&a.setState({minSupplyQuantityError:!0,minSupplyQuantityErrorText:e.error.response.data.min_supply_quantity,quantityError:!1,quantityErrorText:"",supplyQuantityError:!1,supplyQuantityErrorText:""})})):m(s,p).then(function(e){e.payload&&e.payload.status&&200===e.payload.status?(a.setState({quantityError:!1,quantityErrorText:"",supplyQuantityError:!1,supplyQuantityErrorText:"",minSupplyQuantityError:!1,minSupplyQuantityErrorText:""}),a.toggleStockDialog()):e.error.response.data.quantity?a.setState({quantityError:!0,quantityErrorText:e.error.response.data.quantity,supplyQuantityError:!1,supplyQuantityErrorText:"",minSupplyQuantityError:!1,minSupplyQuantityErrorText:""}):e.error.response.data.supply_quantity?a.setState({supplyQuantityError:!0,supplyQuantityErrorText:e.error.response.data.supply_quantity,quantityError:!1,quantityErrorText:"",minSupplyQuantityError:!1,minSupplyQuantityErrorText:""}):e.error.response.data.min_supply_quantity&&a.setState({minSupplyQuantityError:!0,minSupplyQuantityErrorText:e.error.response.data.min_supply_quantity,quantityError:!1,quantityErrorText:"",supplyQuantityError:!1,supplyQuantityErrorText:""})})},a.moveToSubcategory=function(e,t){a.setState(function(a){var r=a.prevCatId,n=a.prevCatName;return{prevCatId:[].concat(Object(W.a)(r),[e]),prevCatName:[].concat(Object(W.a)(n),[t]),currentCatName:t,parentCatId:e,items:[]}}),a.redirect(e)},a.moveBackFromSubcategory=function(){var e=a.state,t=e.prevCatId,r=e.prevCatName;t.pop(),r.pop(),a.setState({prevCatId:t,prevCatName:r,currentCatName:r[r.length-1],parentCatId:t[t.length-1]}),a.redirect(t[t.length-1])},a.redirect=function(e){a.props.history.push("/main/catalog/category/".concat(e)),a.getSubcat(e)},a.getCurrentCat=function(e){(0,a.props.getCurrentCat)(e).then(function(e){e.payload&&e.payload.status&&200===e.payload.status?a.setState(function(t){var a=t.prevCatId,r=t.prevCatName;return{prevCatId:[].concat(Object(W.a)(a),[e.payload.data.id]),prevCatName:[].concat(Object(W.a)(r),[e.payload.data.name]),currentCatName:e.payload.data.name,parentCatId:e.payload.data.id,noCategoryExist:!1}}):(console.log(e),a.setState(function(t){t.prevCatId,t.prevCatName;return{prevCatId:[],prevCatName:[],currentCatName:e.error.response.data.id,parentCatId:"",noCategoryExist:!0}}))})},a.changePage=function(e,t){var r=a.props.paginate,n=t||e.selected+1,o=a.state.parentCatId,l=[],c=[],s=[],i="",u="",m=0,p=0;r(n,o).then(function(e){e.payload&&e.payload.status&&200===e.payload.status&&(l=e.payload.data.results,i=e.payload.data.next,u=e.payload.data.previous,m=e.payload.data.total_pages,p=e.payload.data.count,l.map(function(e,t){return e.is_product?s.push(e):c.push(e)}),a.setState({items:[c,s],activePage:n,totalItemsCount:p,totalPagesCount:m,next:i,prev:u}),a.endLoading())})},a.endLoading=function(){a.setState({loading:!1,nameError:!1,priceError:!1,nameErrorText:"",priceErrorText:""})},a}return Object(w.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.history.location.pathname,t=e.split("/")[e.split("/").length-1];"catalog"===t?this.getCategories():(this.getCurrentCat(t),this.redirect(t))}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.history.location.pathname,r=a.split("/")[a.split("/").length-1];this.props.catalog!==e.catalog&&"catalog"===r&&this.getCategories()}},{key:"componentWillUnmount",value:function(){this.setState({openDeleteDialog:!1,openEditDialog:!1,openAddDialog:!1,openAddStockDialog:!1,openAddProductDialog:!1,openAddStockCustomDialog:!1,items:[[],[]],categoryProducts:[],filteredProds:[],currentCatName:"",parentCatId:!1,targetId:"",newItemType:"",newCategoryName:"",newProductPrice:"",newProdName:"",activePage:1,totalItemsCount:0,totalPagesCount:0,next:"",prev:"",loading:!0,nameError:!1,priceError:!1,quantityError:!1,supplyQuantityError:!1,minSupplyQuantityError:!1,nameErrorText:"",priceErrorText:"",quantityErrorText:"",supplyQuantityErrorText:"",minSupplyQuantityErrorText:"",quantity:"",autoSup:!1,supply_quantity:"",min_supply_quantity:"",newStock:!1,inventoryId:""})}},{key:"render",value:function(){var e=this,t=this.state,a=t.openDeleteDialog,o=t.openEditDialog,l=t.openAddDialog,c=t.openAddStockCustomDialog,s=t.openAddStockDialog,i=t.openAddProductDialog,u=t.prevCatName,m=t.loading,p=t.items,d=t.activePage,E=t.categoryId,g=t.totalPagesCount,y=t.totalItemsCount,h=t.currentCatName,v=t.newItemType,b=t.currentItemName,f=t.currentItemPrice,_=t.nameError,N=t.priceError,S=t.nameErrorText,C=t.priceErrorText,k=t.autoSup,w=t.quantity,T=t.supply_quantity,q=t.min_supply_quantity,O=(t.categoryProducts,t.newProdName),D=t.filteredProds,j=t.newStock,A=t.quantityError,P=t.quantityErrorText,I=t.supplyQuantityError,R=t.supplyQuantityErrorText,Q=t.minSupplyQuantityError,U=t.minSupplyQuantityErrorText,L=t.noCategoryExist,F=this.props.history.location.pathname;F.split("/")[F.split("/").length-1];return console.log(p),n.a.createElement("div",{className:"catalog_page content_block"},n.a.createElement("div",{className:"custom_title_wrapper"},"/main/catalog"!==F?u.length>1?n.a.createElement(r.Fragment,null,n.a.createElement(x.a,{to:"#",onClick:this.moveBackFromSubcategory},n.a.createElement("img",{src:ie.a,alt:"Path"}),u[u.length-2]),n.a.createElement("div",{className:"title_page"},u[u.length-1])):n.a.createElement(r.Fragment,null,n.a.createElement(x.a,{to:"/main/catalog",onClick:this.getCategories},n.a.createElement("img",{src:ie.a,alt:"Path"}),"Products and categories"),n.a.createElement("div",{className:"title_page"},h)):n.a.createElement("div",{className:"title_page"},"Products and categories")),n.a.createElement("div",{className:"content_page"},m?n.a.createElement(X,null):n.a.createElement("div",{className:"catalog_table ".concat("/main/catalog"===F?"catalog":"")},n.a.createElement("div",{className:"table_panel"},L?null:n.a.createElement(r.Fragment,null,"/main/catalog"===F?n.a.createElement(r.Fragment,null,n.a.createElement("button",{onClick:function(){return e.addNewItem("cat")}},"+ add category"),null):n.a.createElement(r.Fragment,null,n.a.createElement("button",{onClick:function(){return e.addNewItem("sub")}},"+ add subcategory"),n.a.createElement("button",{onClick:function(){return e.addNewItem("prod")}},"+ add product")))),0===y&&p[0].length+p[1].length<1?n.a.createElement("h3",{className:"empty_list"},"The list is empty"):n.a.createElement("div",{className:"table_container transactions_columns"},n.a.createElement("div",{className:"table_header"},n.a.createElement("div",{className:"table_row"},n.a.createElement("div",{className:"row_item"},"Name"),n.a.createElement("div",{className:"row_item"},"Code"),n.a.createElement("div",{className:"row_item"},"Unit value"),n.a.createElement("div",{className:"row_item"},"Actions"))),n.a.createElement("div",{className:"table_body"},p.map(function(e,t){return e.map(function(e,t){return n.a.createElement(ce.a,{style:{width:"18rem"}},n.a.createElement(ce.a.Img,{variant:"top",src:"holder.js/200x300"}),n.a.createElement(ce.a.Body,null,n.a.createElement(ce.a.Title,null,"Card Title"),n.a.createElement(ce.a.Text,null,"Some quick example text to build on the card title and make up the bulk of the card's content.")))})}))),y<10?null:n.a.createElement("div",{className:"pagination_info_wrapper"},n.a.createElement("div",{className:"pagination_block"},n.a.createElement(le,{active:d-1,pageCount:g,onChange:this.changePage})),n.a.createElement("div",{className:"info"},"Displaying page ",d," of ",g,", items ",10*d-9," to ",10*d>y?y:10*d," of ",y)))),n.a.createElement($,{open:a,onClose:function(){return e.toggleDeleteDialog(e.state.productId,e.state.isProduct,E)}},n.a.createElement("div",{className:"delete_dialog"},n.a.createElement("div",{className:"title"},"cat"===v?n.a.createElement("span",null,"Delete category"):"prod"===v?n.a.createElement("span",null,"Delete product"):"sub"===v?n.a.createElement("span",null,"Delete subcategory"):null),n.a.createElement("div",{className:"descriptions"},"cat"===v?n.a.createElement("span",null,"You are about to delete ",n.a.createElement("span",null,b)," from the catalog. All subcategories and products of this category will also be deleted. Are you sure?"):"prod"===v?n.a.createElement("span",null,"You are about to delete ",n.a.createElement("span",null,b)," from the catalog. ",n.a.createElement("br",null),"Are you sure?"):"sub"===v?n.a.createElement("span",null,"You are about to delete ",n.a.createElement("span",null,b)," from the catalog. All subcategories and products of this subcategory will also be deleted. Are you sure?"):null),n.a.createElement("div",{className:"btn_wrapper"},n.a.createElement("button",{className:"cancel_btn",onClick:this.toggleDeleteDialog},"Cancel"),n.a.createElement("button",{className:"red_btn",onClick:this.deleteClick},"delete")))),n.a.createElement($,{open:s,onClose:this.toggleStockDialog},n.a.createElement("div",{className:"stock_dialog"},n.a.createElement("div",{className:"title"},n.a.createElement("span",null,"Add product")),j?null:n.a.createElement("div",{className:"help_block"},n.a.createElement("span",null,"This product is already in stock, you can edit it below.")),n.a.createElement("div",{className:"stock_wrapper"},n.a.createElement("div",{className:"first_block"},n.a.createElement("div",{className:"block_field row"},n.a.createElement("span",null,"Available qty")),n.a.createElement("input",{type:"number",onChange:this.newQuantity,value:w,placeholder:"Type here..."}),n.a.createElement("div",{className:"block_field error_block row"},n.a.createElement("span",{className:A?"visible":""},P))),n.a.createElement("div",null,n.a.createElement("span",null,"Auto supply"),n.a.createElement("div",{className:"supply_btn"},n.a.createElement("button",{onClick:this.autoSupOff,className:k?"red":"red active"},n.a.createElement("img",{src:me.a,alt:"off"})),n.a.createElement("button",{onClick:this.autoSupOn,className:k?"green active":"green"},n.a.createElement("img",{src:de.a,alt:"on"})))),n.a.createElement("div",{className:k?"":"disabled"},n.a.createElement("div",{className:"block_field row"},n.a.createElement("span",null,"Min. qty")),n.a.createElement("input",{type:"number",onChange:this.newMinSupplyQuantity,value:q,placeholder:"Type here..."}),n.a.createElement("div",{className:"block_field error_block row"},n.a.createElement("span",{className:Q?"visible":""},U))),n.a.createElement("div",{className:k?"":"disabled"},n.a.createElement("div",{className:"block_field row"},n.a.createElement("span",null,"Auto supply qty")),n.a.createElement("input",{type:"number",onChange:this.newSupplyQuantity,value:T,placeholder:"Type here..."}),n.a.createElement("div",{className:"block_field error_block row"},n.a.createElement("span",{className:I?"visible":""},R)))),n.a.createElement("div",{className:"btn_wrapper"},n.a.createElement("button",{className:"cancel_btn",onClick:this.toggleStockDialog},"Cancel"),n.a.createElement("button",{className:"blue_btn",onClick:this.addToStock},"add")))),n.a.createElement($,{open:c,onClose:this.toggleStockCustomDialog},n.a.createElement("div",{className:"stock_dialog"},n.a.createElement("div",{className:"title"},n.a.createElement("span",null,"Add product")),n.a.createElement("div",{className:"stock_wrapper"},n.a.createElement("div",{className:"first_block"},n.a.createElement("div",{className:"block_field row"},n.a.createElement("span",null,"Available qty")),n.a.createElement("input",{type:"number",onChange:this.newQuantity,value:w,placeholder:"Type here..."})),n.a.createElement("div",null,n.a.createElement("div",{className:"block_field row"},n.a.createElement("span",null,"Price")),n.a.createElement("input",{type:"number",onChange:this.newProductPrice,value:f,placeholder:"Type here..."}))),n.a.createElement("div",{className:"block_field error_block row"},n.a.createElement("span",{className:N?"visible":""},C),n.a.createElement("span",{className:A?"visible":""},P)),n.a.createElement("div",{className:"btn_wrapper"},n.a.createElement("button",{className:"cancel_btn",onClick:this.toggleStockCustomDialog},"Cancel"),n.a.createElement("button",{className:"blue_btn",onClick:function(){return e.addClick(!0)}},"add")))),n.a.createElement($,{open:o,onClose:function(){return e.toggleEditDialog(e.state.productId,e.state.isProduct,E)}},n.a.createElement("div",{className:"edit_dialog"},n.a.createElement("div",{className:"title"},"cat"===v?n.a.createElement("span",null,"Edit category"):"prod"===v?n.a.createElement("span",null,"Edit product"):"sub"===v?n.a.createElement("span",null,"Edit subcategory"):null),n.a.createElement("div",{className:"block_edit_field".concat("prod"===v?"":" category")},n.a.createElement("div",null,n.a.createElement("div",{className:"block_field row"},n.a.createElement("span",null,"Name")),n.a.createElement("input",{onChange:this.newCategoryName,value:b,type:"text"})),"prod"===v?n.a.createElement("div",null,n.a.createElement("div",{className:"block_field row"},n.a.createElement("span",null,"Unit value")),n.a.createElement("input",{onChange:this.newProductPrice,value:f,type:"number",placeholder:"Type here..."}),n.a.createElement("p",null,"RWF")):null),n.a.createElement("div",{className:"block_field error_block row"},n.a.createElement("span",{className:N?"visible":""},C),n.a.createElement("span",{className:_?"visible":""},S)),n.a.createElement("div",{className:"btn_wrapper"},n.a.createElement("button",{className:"cancel_btn",onClick:this.toggleEditDialog},"Cancel"),n.a.createElement("button",{className:"blue_btn",onClick:this.editClick},"Save")))),n.a.createElement($,{open:l,onClose:function(){return e.toggleAddDialog(E,!0)}},n.a.createElement("div",{className:"add_dialog"},n.a.createElement("div",{className:"title"},"cat"===v?n.a.createElement("span",null,"Add category"):"prod"===v?n.a.createElement("span",null,"Add product"):"sub"===v?n.a.createElement("span",null,"Add subcategory"):null),n.a.createElement("div",{className:"block_add_field"},n.a.createElement("div",null,n.a.createElement("div",{className:"block_field row"},n.a.createElement("span",null,"Name")),n.a.createElement("input",{onChange:this.newCategoryName,type:"text",placeholder:"Type here..."})),"prod"===v?n.a.createElement("div",null,n.a.createElement("div",{className:"block_field row"},n.a.createElement("span",null,"Unit value")),n.a.createElement("input",{onChange:this.newProductPrice,type:"number",placeholder:"Type here..."}),n.a.createElement("p",null,"RWF")):null),n.a.createElement("div",{className:"block_field error_block row"},n.a.createElement("span",{className:N?"visible":""},C),n.a.createElement("span",{className:_?"visible":""},S)),n.a.createElement("div",{className:"btn_wrapper"},n.a.createElement("button",{className:"cancel_btn",onClick:this.toggleAddDialog},"Cancel"),n.a.createElement("button",{className:"blue_btn",onClick:function(){return e.addClick(!1)}},"Add")))),n.a.createElement($,{open:i,onClose:this.toggleAddProductDialog,onClick:this.clearSearch},n.a.createElement("div",{className:"add_product_dialog"},n.a.createElement("div",{className:"title"},n.a.createElement("span",null,"Add product")),n.a.createElement("div",{className:"descriptions"},n.a.createElement("span",null,"Type a product name and select one of the options ",n.a.createElement("br",null),"or create a new product.")),n.a.createElement("div",{className:"block_field row"},n.a.createElement("span",null)),n.a.createElement("div",{className:"block_search"},n.a.createElement("input",{onChange:this.onTypeAction,type:"text",placeholder:"Search\u2026"}),D.length>0&&O.length>2?n.a.createElement("div",{className:"autocomplete"},_?null:n.a.createElement("button",{className:"new",onClick:this.toggleStockCustomDialog},O,n.a.createElement("span",null,"+ add new")),D.map(function(t,a){return n.a.createElement("button",{id:t.id,key:a,onClick:function(){return e.checkStocks(t.id)}},t.name)})):null),n.a.createElement("div",{className:"block_field error_block row"},n.a.createElement("span",{className:_?"visible":""},S)),n.a.createElement("div",{className:"btn_wrapper"},n.a.createElement("button",{className:"cancel_btn",onClick:this.toggleAddProductDialog},"Cancel"),n.a.createElement("button",{className:"blue_btn",disabled:_||O.length<3,onClick:this.toggleStockCustomDialog},"Next")))))}}]),t}(r.Component);var lt=Object(c.c)(function(e){return{}},function(e){return Object(s.b)({getCat:Be,addCat:He,getSubcat:Ze,addProduct:$e,getCurrentCat:ze,editCat:We,editProd:Je,deleteProd:Xe,deleteCat:Ke,paginate:et,checkStocks:at,createInventory:rt,patchInventory:nt,getProdsForStocks:tt},e)})(ot),ct=a(84),st=a.n(ct);var it=a(127),ut=a.n(it),mt=(a(259),function(e){function t(){var e,a;Object(N.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(n)))).state={loading:!0},a}return Object(w.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.getClinicLog,r=t.getClinicDashBoard;a().then(function(t){t.payload&&t.payload.status&&200===t.payload.status&&r().then(function(t){t.payload&&t.payload.status&&200===t.payload.status&&e.setState({loading:!1})})})}},{key:"render",value:function(){var e=this.props,t=e.clinicDashBoard,a=e.clinicLog;return this.state.loading?null:n.a.createElement("div",{className:"dashboard_page content_block"},n.a.createElement("div",{className:"title_page"},"Dashboard"),n.a.createElement("div",{className:"info_block"},n.a.createElement("div",null,n.a.createElement("p",{className:"descriptions"},"total amount"),n.a.createElement("span",null,n.a.createElement("span",{className:"small_price"},"RWF"),t.total_amount)),n.a.createElement("div",{className:"center_block"},n.a.createElement(x.a,{to:{pathname:"/main/stock-management",state:{tab:0}},className:"green_text"},"products in stock",n.a.createElement("img",{className:"arrow",src:ut.a,alt:"arrow_forward"})),n.a.createElement("div",{className:"info"},n.a.createElement("span",null,t.in_stock))),n.a.createElement("div",null,n.a.createElement(x.a,{to:{pathname:"/main/stock-management",state:{tab:1}},className:"red_text"},"products out of stock",n.a.createElement("img",{className:"arrow",src:ut.a,alt:"arrow_forward"})),n.a.createElement("div",{className:"info"},n.a.createElement("span",null,t.out_stock)))),n.a.createElement("div",{className:"dashboard_block"},n.a.createElement("div",{className:"panel_dashboard"},n.a.createElement("span",null,"recent actions"),n.a.createElement(x.a,{to:"/main/activity"},"view all")),n.a.createElement("div",{className:"dashboard_info_wrapper"},a.length>0?a.map(function(e){return n.a.createElement("div",{key:e.id},n.a.createElement("span",null,st()(e.date).format("DD/MM/YYYY HH:mm")),n.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.text}}))}):n.a.createElement("h3",null,"The list is empty."))))}}]),t}(r.Component)),pt={getClinicLog:function(){return{type:Oe,payload:{client:"default",request:{url:"/clinic-logs/?page_size=5",method:"get"}}}},getClinicDashBoard:function(){return{type:De,payload:{client:"default",request:{url:"/clinic-dashboard/",method:"get"}}}}},dt=Object(c.c)(function(e){return{clinicLog:e.dashboard.clinicLog,clinicDashBoard:e.dashboard.clinicDashBoard}},pt)(mt),Et=a(399),gt=a(18),yt=a(53),ht=a(400),vt=a(403),bt=a(93),ft=a(193),_t=a(183),Nt=a.n(_t),St=(a(261),function(e){return bt.z.DropdownIndicator&&n.a.createElement(bt.z.DropdownIndicator,e,n.a.createElement("div",{className:e.selectProps.menuIsOpen?"select_indicator indicator_active":"select_indicator"},n.a.createElement(Nt.a,null)))}),Ct=function(e){var t=e.value,a=e.onKeyDown,r=e.options,o=e.loading,l=e.change,c=e.placeholder,s=e.isClearable,i=e.isSearchable,u=void 0===i||i;return n.a.createElement(ft.a,{className:"select_component",classNamePrefix:"select",isDisabled:!1,isLoading:o,isClearable:!s,isSearchable:u,name:"color",value:t,options:r,onChange:l,loadingMessage:function(){return"Loading filters..."},placeholder:c,onKeyDown:a,components:{DropdownIndicator:St}})},kt=(a(263),function(e){var t=e.onChange,a=e.input,r=e.placeholder,o=e.type,l=e.id,c=e.meta,s=c.touched,i=c.error,u=(c.warning,e.max),m=e.min;return n.a.createElement("label",{className:s&&i?""!==a.value?"block-input error_border value":"error_border block-input":""!==a.value?"block-input value":"block-input"},n.a.createElement("input",Object.assign({onChange:t},a,{onKeyDown:function(e){return 13===e.keyCode&&e.preventDefault()},placeholder:r,max:u,min:m,id:l,type:o,autoComplete:"off"})),n.a.createElement("span",{className:"error"},i))});function wt(e,t){return{type:_e,payload:{client:"default",request:{url:"/auth/user-management/".concat(e,"/"),method:"PATCH",data:t}}}}function Tt(e){return{type:Se,payload:{client:"default",request:{url:"/auth/user-management/".concat(e,"/"),method:"delete"}}}}function qt(e){return{type:Ne,payload:{client:"default",request:{url:"/auth/add-user/",method:"POST",data:e}}}}function Ot(){return{type:fe,payload:{client:"default",request:{url:"/auth/user-management-list/",method:"get"}}}}function Dt(){return{type:Ce}}var xt=function(e){function t(){var e,a;Object(N.a)(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(o)))).state={role:[{label:n.a.createElement("div",{className:"status"},n.a.createElement("div",null,"Admin")),value:"admin"},{label:n.a.createElement("div",{className:"status"},n.a.createElement("div",null,"User")),value:"user"}],noErrors:!1},a.handleChange=function(e){return function(t){a.setState(Object(yt.a)({},e,t))}},a.submitForm=function(e){var t=a.props,r=t.patchUser,n=t.getUsersList,o=t.toggler,l=t.initialValues,c=a.state.status,s=Object(gt.a)({},e,{role:c.value});r(l.id,s).then(function(e){e.payload&&e.payload.status&&200===e.payload.status&&(n(),o())})},a.defaultStatus=function(){a.setState({status:null,noErrors:!0}),a.props.resetErrorUsers()},a}return Object(w.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.role,r=t.status,o=this.props,l=o.toggler,c=o.state,s=o.handleSubmit,i=o.fail_err,u=(o.initialValues,o.reset);return n.a.createElement($,{open:c,onClose:function(){l(),e.defaultStatus()}},n.a.createElement("div",{className:"edit_dialog_user"},n.a.createElement("form",{onSubmit:s(this.submitForm)},n.a.createElement("div",{className:"title"},n.a.createElement("span",null,"Edit user")),n.a.createElement("div",{className:"block_edit_field"},n.a.createElement("span",{className:"span"},"Name"),n.a.createElement(ht.a,{name:"username",type:"text",component:kt,placeholder:"Type here\u2026",className:"input"})),n.a.createElement("div",{className:"block_edit_field_select"},n.a.createElement("div",null,n.a.createElement("span",null,"Email"),n.a.createElement(ht.a,{name:"email",type:"text",component:kt,placeholder:"Type here\u2026",className:"input"}),n.a.createElement("span",{className:"back_error add"},!!i&&i.email)),n.a.createElement("div",null,n.a.createElement("span",null,"Role"),n.a.createElement(vt.a,{className:"select_wrapper"},n.a.createElement(Ct,{value:r,options:a,change:this.handleChange("status"),isClearable:"false",isSearchable:!1,onKeyDown:function(e){return 13===e.keyCode&&e.preventDefault()}})),n.a.createElement("span",{className:"back_error role"},!!i&&i.role))),n.a.createElement("div",{className:"btn_wrapper"},n.a.createElement("button",{className:"cancel_btn",onClick:function(t){t.preventDefault(),l(),u("EditDialog"),e.defaultStatus()}},"Cancel"),n.a.createElement("button",{className:"blue_btn",disabled:!r},"save")))))}}]),t}(r.Component),jt=function(e){var t={},a=new RegExp(/^([A-Za-z '.-]+){1}$/g);return e.username?a.test(e.username)||(t.username="Invalid name"):t.username="Required",e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,5}$/i.test(e.email)||(t.email="Invalid email"):t.email="Required",t};xt=Object(Et.a)({form:"EditDialog",validate:jt,enableReinitialize:!0})(xt);var At=Object(c.c)(function(e,t){return{fail_err:e.users.error}},function(e){return Object(s.b)({patchUser:wt,getUsersList:Ot,resetErrorUsers:Dt},e)})(xt),Pt=function(e){function t(){var e,a;Object(N.a)(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(o)))).state={role:[{label:n.a.createElement("div",{className:"status"},n.a.createElement("div",null,"Admin")),value:"admin"},{label:n.a.createElement("div",{className:"status"},n.a.createElement("div",null,"User")),value:"user"}]},a.handleChange=function(e){return function(t){a.setState(Object(yt.a)({},e,t))}},a.defaultStatus=function(){a.setState({status:null})},a.submitForm=function(e,t){var r=a.props,n=r.postAddUser,o=r.toggler,l=r.getUsersList,c=r.reset,s=a.state.status;n(Object(gt.a)({},e,{role:s.value})).then(function(e){e.payload&&e.payload.status&&201===e.payload.status&&(c("AddingDialog"),a.setState({status:null}),l(),o())})},a}return Object(w.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.role,r=t.status,o=this.props,l=o.toggler,c=o.state,s=o.handleSubmit,i=o.submitting,u=o.pristine,m=o.valid,p=o.adding_error,d=o.reset;return n.a.createElement($,{open:c,onClose:function(){l(),e.defaultStatus()}},n.a.createElement("div",{className:"edit_dialog_user"},n.a.createElement("form",{onSubmit:s(this.submitForm)},n.a.createElement("div",{className:"title"},n.a.createElement("span",null,"Add user")),n.a.createElement("div",{className:"block_edit_field"},n.a.createElement("span",{className:"span"},"Name"),n.a.createElement(ht.a,{name:"username",type:"text",component:kt,placeholder:"Type here\u2026",className:"input"})),n.a.createElement("div",{className:"block_edit_field_select"},n.a.createElement("div",null,n.a.createElement("span",null,"Email"),n.a.createElement(ht.a,{name:"email",type:"text",component:kt,placeholder:"Type here\u2026",className:"input"}),n.a.createElement("span",{className:"back_error add"},p&&p.email)),n.a.createElement("div",null,n.a.createElement("span",null,"Role"),n.a.createElement(vt.a,{className:"select_wrapper"},n.a.createElement(Ct,{value:r,options:a,change:this.handleChange("status"),isClearable:"false",isSearchable:!1,onKeyDown:function(e){return 13===e.keyCode&&e.preventDefault()}})),n.a.createElement("span",{className:"back_error role"},!!p&&p.role))),n.a.createElement("div",{className:"btn_wrapper"},n.a.createElement("button",{className:"cancel_btn",onClick:function(t){t.preventDefault(),l(),d("AddingDialog"),e.defaultStatus()}},"Cancel"),n.a.createElement("button",{disabled:i||u||!m||!r,className:"blue_btn"},"add")))))}}]),t}(r.Component);Pt=Object(Et.a)({form:"AddingDialog",validate:jt})(Pt);var It=Object(c.c)(function(e){return{adding_error:e.users.error}},function(e){return Object(s.b)({postAddUser:qt,getUsersList:Ot,resetErrorUsers:Dt},e)})(Pt),Rt=function(e){function t(){var e,a;Object(N.a)(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(o)))).state={role:[{label:n.a.createElement("div",{className:"status"},n.a.createElement("div",null,"Admin")),value:"admin"},{label:n.a.createElement("div",{className:"status"},n.a.createElement("div",null,"User")),value:"user"}]},a.submitForm=function(e){var t=a.props,r=t.deleteUser,n=t.username,o=t.toggler,l=t.getUsersList;r(n.id,e).then(function(e){e.payload&&e.payload.status&&204===e.payload.status&&(l(),o())})},a}return Object(w.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.toggler,a=e.state,r=e.handleSubmit,o=e.username,l=e.reset;return n.a.createElement($,{open:a,onClose:t},n.a.createElement("div",{className:"edit_dialog_user"},n.a.createElement("form",{onSubmit:r(this.submitForm)},n.a.createElement("div",{className:"title"},n.a.createElement("span",null,"Delete user")),n.a.createElement("div",{className:"descriptions"},n.a.createElement("span",null,"You are about to delete ",n.a.createElement("span",{className:"username",style:{fontFamily:"MontSemiBold"}},!!o&&o.username)," from the system. ",n.a.createElement("br",null),"Are you sure?")),n.a.createElement("div",{className:"btn_wrapper"},n.a.createElement("button",{className:"cancel_btn",onClick:function(e){e.preventDefault(),t(),l("DeleteDialog")}},"Cancel"),n.a.createElement("button",{className:"blue_btn"},"delete")))))}}]),t}(r.Component);Rt=Object(Et.a)({form:"DeleteDialog",enableReinitialize:!0})(Rt);var Qt=Object(c.c)(function(e){return{}},function(e){return Object(s.b)({deleteUser:Tt,getUsersList:Ot},e)})(Rt),Ut=(a(362),function(e){function t(){var e,a;Object(N.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(n)))).state={openDeleteDialog:!1,openEditDialog:!1,openAddDialog:!1,loading:!0},a.doRequest=function(){(0,a.props.getUsersList)().then(function(e){e.payload&&e.payload.status&&200===e.payload.status&&a.setState({loading:!1})})},a.ucFirst=function(e){return e?e[0].toUpperCase()+e.slice(1):e},a.toggleDeleteDialog=function(e){a.setState(function(t){return{openDeleteDialog:!t.openDeleteDialog,userData:e}})},a.toggleAddDialog=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];a.setState(function(e){return{openAddDialog:!e.openAddDialog}}),(0,a.props.resetErrorUsers)()},a.toggleEditDialog=function(e){a.setState(function(t){return{openEditDialog:!t.openEditDialog,userData:e}})},a}return Object(w.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.doRequest()}},{key:"render",value:function(){var e=this,t=this.state,a=t.openDeleteDialog,o=t.openEditDialog,l=t.openAddDialog,c=t.loading,s=t.userData,i=this.props.users_list;return c?null:n.a.createElement("div",{className:"user_management_page content_block"},n.a.createElement("div",{className:"title_page"},"User management"),n.a.createElement("div",{className:"content_page"},n.a.createElement("div",{className:"user_management_table"},n.a.createElement("div",{className:"table_panel"},n.a.createElement("button",{onClick:this.toggleAddDialog},"+ add user")),n.a.createElement("div",{className:"table_container transactions_columns"},n.a.createElement("div",{className:"table_header"},n.a.createElement("div",{className:"table_row"},n.a.createElement("div",{className:"row_item"},"Name"),n.a.createElement("div",{className:"row_item"},"Email"),n.a.createElement("div",{className:"row_item"},"Role"),n.a.createElement("div",{className:"row_item"},"Actions"))),n.a.createElement("div",{className:"table_body"},i.count?n.a.createElement(r.Fragment,null,i.results.map(function(t,a){return n.a.createElement("div",{className:"table_row",key:a},n.a.createElement("div",{className:"row_item"},t.username),n.a.createElement("div",{className:"row_item"},t.email),n.a.createElement("div",{className:"row_item"},e.ucFirst(t.role)),n.a.createElement("div",{className:"row_item "},n.a.createElement("button",{className:"blue_text",onClick:function(){return e.toggleEditDialog(t)}},"Edit"),n.a.createElement("button",{className:"red_text",onClick:function(){return e.toggleDeleteDialog(t)}},"Delete")))})):n.a.createElement("div",{className:"table_row cap"},"This list is empty"))))),n.a.createElement(At,{initialValues:s,toggler:this.toggleEditDialog,state:o}),n.a.createElement(It,{toggler:this.toggleAddDialog,state:l}),n.a.createElement(Qt,{username:s,toggler:this.toggleDeleteDialog,state:a}))}}]),t}(r.Component));Ut=Object(Et.a)({form:"UserManagement"})(Ut);var Lt=Object(c.c)(function(e){return{users_list:e.users.users_list}},function(e){return Object(s.b)({getUsersList:Ot,resetErrorUsers:Dt},e)})(Ut),Ft=a(184),Gt=a.n(Ft),Mt=a(185),Yt=a.n(Mt),Vt=a(130),Ht=a.n(Vt),Bt=a(131),Wt=a.n(Bt),Kt=a(186),Zt=a.n(Kt),zt=a(187),$t=a.n(zt),Jt=a(188),Xt=a.n(Jt);a(364);function ea(e,t,a){return{type:ke,payload:{client:"default",request:{url:"/inventory/?".concat(a?"ordering="+a+"&":"").concat(t?"page="+t+"&":"","stock=").concat(e),method:"GET"}}}}function ta(e){return{type:ke,payload:{client:"default",request:{url:"/inventory/?id__in=".concat(e),method:"GET"}}}}function aa(e,t){return{type:we,payload:{client:"default",request:{url:"/inventory-search/?stock=".concat(e).concat(t&&0!==t.length?"&search=".concat(t):""),method:"GET"}}}}function ra(e,t){return{type:Te,payload:{client:"default",request:{url:"/quantity-update/".concat(e,"/"),method:"PATCH",data:t}}}}function na(e){return{type:qe,payload:{client:"default",request:{url:"/requests/",method:"POST",data:e}}}}var oa=function(e){function t(){var e,a;Object(N.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(n)))).state={},a.submitForm=function(e){var t=a.props,r=t.patchQuantity,n=t.toggler,o=t.product_id,l=t.sign,c=t.reset,s=t.activePage,i=t.doRequest,u=Object(gt.a)({},e);"-"===l&&(u.quantity="-".concat(e.quantity)),r(o,u).then(function(e){e.payload&&e.payload.status&&200===e.payload.status&&(c("QuantityDialog"),n(),i({selected:s}))})},a}return Object(w.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.toggler,a=e.state,r=e.product_name,o=e.product_quantity,l=e.handleSubmit,c=e.sign,s=e.fail_err,i=e.startValue,u=e.reset;return n.a.createElement($,{open:a,onClose:function(){t(),u("QuantityDialog")}},n.a.createElement("div",{className:"quantity_dialog"},n.a.createElement("div",{className:"title"},n.a.createElement("span",null,"Change product quantity")),n.a.createElement("div",{className:"descriptions"},n.a.createElement("span",null,"You are about to change available amount of ",n.a.createElement("span",{className:"name"},r),". ",n.a.createElement("br",null),"Enter the quantity of the required product to proceed.")),n.a.createElement("form",{onSubmit:l(this.submitForm)},n.a.createElement("div",{className:"block_field"},n.a.createElement("span",null,"Quantity"),n.a.createElement("span",{className:"back_error"},s&&s.quantity),"-"===c?n.a.createElement(ht.a,{id:"idx",name:"quantity",type:"number",max:o,component:kt,placeholder:"Type here...",value:i}):n.a.createElement(ht.a,{id:"idx",name:"quantity",type:"number",component:kt,placeholder:"Type here...",value:i})),n.a.createElement("div",{className:"btn_wrapper"},n.a.createElement("button",{className:"cancel_btn",onClick:function(e){e.preventDefault(),t(),u("QuantityDialog")}},"Cancel"),n.a.createElement("button",{className:"blue_btn"},"-"===c?"remove":"add")))))}}]),t}(r.Component);oa=Object(Et.a)({form:"QuantityDialog",validate:function(e){var t={};return e.quantity?e.quantity&&/-/.test(e.quantity)&&(t.quantity="Ensure this value is greater than or equal to 0"):t.quantity="This field is required",t}})(oa);var la=Object(c.c)(function(e){return{fail_err:e.stock.error}},function(e){return Object(s.b)({patchQuantity:ra,getStock:ea},e)})(oa),ca=function(e){function t(){var e,a;Object(N.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(n)))).state={},a.submitForm=function(e){var t=a.props,r=t.product_id,n=t.postRequest,o=t.toggler,l=t.reset;e.inventory_id=r,n(e).then(function(e){e.payload&&e.payload.status&&201===e.payload.status&&(o(),l("RequestDialog"))})},a}return Object(w.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.toggler,a=e.state,r=e.product_name,o=e.handleSubmit,l=e.startValue,c=e.reset;return n.a.createElement($,{open:a,onClose:function(){t(),c("RequestDialog")}},n.a.createElement("div",{className:"quantity_dialog"},n.a.createElement("div",{className:"title"},n.a.createElement("span",null,"Request supply")),n.a.createElement("div",{className:"descriptions"},n.a.createElement("span",null,"You are about to send a request for supply of ",n.a.createElement("span",{className:"name"},r),".",n.a.createElement("br",null),"Enter the quantity of the required product to proceed.")),n.a.createElement("form",{onSubmit:o(this.submitForm)},n.a.createElement("div",{className:"block_field"},n.a.createElement("span",null,"Quantity"),n.a.createElement(ht.a,{id:"ixd",name:"quantity",type:"number",component:kt,placeholder:"Type here...",value:l})),n.a.createElement("div",{className:"btn_wrapper"},n.a.createElement("button",{className:"cancel_btn",onClick:function(e){e.preventDefault(),t(),c("RequestDialog")}},"Cancel"),n.a.createElement("button",{className:"green_btn"},"send request")))))}}]),t}(r.Component);ca=Object(Et.a)({form:"RequestDialog",validate:function(e){var t={};return e.quantity?e.quantity&&/-/.test(e.quantity)&&(t.quantity="Ensure this value is greater than or equal to 0"):t.quantity="This field is required",t}})(ca);var sa=Object(c.c)(function(e){return{}},function(e){return Object(s.b)({postRequest:na},e)})(ca),ia=a(396),ua=function(e){function t(){var e,a;Object(N.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(n)))).state={loading:!0,tab:"0",stock:"in",activePage:0,totalPages:"",totalItems:"",InfoIsOpen:!1,openQuantityDialog:!1,openRequestDialog:!1,sign:null,product_name:null,product_quantity:null,openSearch:!1,optionValue:null,switcherState:"quantity",someVal:"",newVal:""},a.doRequest=function(e){var t=a.props.getStock,r=a.state,n=r.stock,o=r.switcherState;t(n,void 0!==e&&e.selected+1,o).then(function(t){t.payload&&t.payload.status&&200===t.payload.status&&(void 0!==e?a.setState({loading:!1,activePage:e.selected,totalPages:t.payload.data.total_pages,totalItems:t.payload.data.count}):a.setState({loading:!1,totalPages:t.payload.data.total_pages,totalItems:t.payload.data.count,activePage:e||0}))})},a.handleSwitch=function(){"quantity"===a.state.switcherState?a.setState({switcherState:"-quantity"}):a.setState({switcherState:"quantity"}),a.timer=a.timeout=setTimeout(function(){a.doRequest()},0)},a.toggleQuantityDialog=function(e,t,r,n){a.setState(function(a){return{openQuantityDialog:!a.openQuantityDialog,sign:"string"===typeof e?e:"",product_name:t,product_quantity:r,product_id:n,InfoIsOpen:!1}})},a.toggleRequestDialog=function(e,t,r){a.setState(function(a){return{openRequestDialog:!a.openRequestDialog,product_name:"string"===typeof e?e:"",product_quantity:t,product_id:r,InfoIsOpen:!1}})},a.changeTab=function(e,t){var r=a.props.getStock;a.setState({tab:e,stock:t}),r(t).then(function(e){e.payload&&e.payload.status&&200===e.payload.status&&(a.setState({loading:!1,activePage:0,totalPages:e.payload.data.total_pages,totalItems:e.payload.data.count}),a.pagFunc())})},a.openMenu=function(e){a.setState(function(t){t.InfoIsOpen;return{InfoIsOpen:!0,product_id:e}})},a.closeMenu=function(e){a.setState(function(e){e.InfoIsOpen;return{InfoIsOpen:!1,product_id:""}})},a.toggleSearch=function(){a.setState(function(e){return{openSearch:!e.openSearch}})},a.togglePopper=function(){a.setState({openSearch:!0,activePage:0})},a.handleToggleSearch=function(){a.setState({openSearch:!1})},a.searchOnChange=function(e){var t=/[^a-zA-Z\u0430-\u044f\u0410-\u042f0-9]/g;a.setState({someVal:e.target.value.replace(t,""),newVal:e.target.value.replace(t,"")})},a.handleSearchChange=function(e){var t=a.props,r=t.searchStock,n=t.search_list,o=t.getSearchList,l=a.state.stock,c=e.target.value.replace("#","");if(c.length>=3?r(l,c).then(function(e){e.payload&&e.payload.status&&200===e.payload.status&&a.togglePopper()}):c.length<3&&(a.setState({openSearch:!1}),0===c.length&&a.doRequest()),13===e.keyCode&&c.length>2)o(n.map(function(e){return e.id}).join(",")).then(function(e){e.payload&&e.payload.status&&200===e.payload.status&&(a.setState({totalPages:e.payload.data.total_pages,totalItems:e.payload.data.count}),a.handleToggleSearch())});else if(13===e.keyCode&&c.length<2)return null},a.handleSearchClick=function(e){(0,a.props.getSearchList)(e).then(function(e){e.payload&&e.payload.status&&200===e.payload.status&&(a.setState({totalPages:e.payload.data.total_pages,totalItems:e.payload.data.count}),a.handleToggleSearch())})},a.pagFunc=function(e){a.doRequest(e)},a}return Object(w.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({role:localStorage.getItem("role")}),this.props.location.state&&(this.setState({tab:this.props.location.state.tab.toString()}),1===this.props.location.state.tab&&this.setState({stock:"out"})),this.timer=this.timeout=setTimeout(function(){e.doRequest()},0)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this,t=this.state,a=t.tab,o=t.activePage,l=t.InfoIsOpen,c=t.openQuantityDialog,s=t.openRequestDialog,i=t.loading,u=t.sign,m=t.product_name,p=t.product_quantity,d=t.product_id,E=t.openSearch,g=t.totalPages,y=t.totalItems,h=t.role,v=(t.stock,t.newVal),b=this.props,f=b.stock_list,_=b.search_list;return i?null:n.a.createElement("div",{className:"stock_management_page content_block"},n.a.createElement("div",{className:"title_page"},"Stock management"),n.a.createElement("div",{className:"content_page"},n.a.createElement("div",{className:"tab_block"},n.a.createElement("button",{className:"0"===a?"active":"",onClick:function(){return e.changeTab("0","in")}},"in stock"),n.a.createElement("button",{className:"1"===a?"active":"",onClick:function(){return e.changeTab("1","out")}},"out of stock")),y>0?n.a.createElement(r.Fragment,null,n.a.createElement(ia.a,{onClickAway:this.handleToggleSearch},n.a.createElement("div",{className:"block_search"},n.a.createElement("input",{onKeyUp:function(t){return e.handleSearchChange(t)},onChange:this.searchOnChange,value:v,type:"text",placeholder:"Search\u2026"}),E?n.a.createElement("div",{className:"autocomplete"},_&&_[0]?_.map(function(t,a){return n.a.createElement("button",{onClick:function(){return e.handleSearchClick(t.id)},className:"search_item",key:a},t.product_name)}):n.a.createElement("button",{disabled:!0},"No items")):null)),"0"===a&&n.a.createElement("div",{className:"in_stock_wrapper"},n.a.createElement("div",{className:"in_stock_table"},n.a.createElement("div",{className:"table_container transactions_columns"},n.a.createElement("div",{className:"table_header"},n.a.createElement("div",{className:"table_row"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"row_item"},"Name"),n.a.createElement("div",{className:"row_item"},"Code"),n.a.createElement("div",{className:"row_item"},n.a.createElement("button",{onClick:this.handleSwitch,className:"btn_sort"},"Quantity",n.a.createElement("div",{className:"sort"},n.a.createElement("img",{src:$t.a,alt:"sort_up"}),n.a.createElement("img",{src:Xt.a,alt:"sort_down"})))),n.a.createElement("div",{className:"row_item"},"Unit value"),n.a.createElement("div",{className:"row_item"},"Total value"),n.a.createElement("div",{className:"row_item"},"Actions")))),n.a.createElement("div",{className:"table_body"},f.results.map(function(t,a){return n.a.createElement("div",{className:"table_row",key:a},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"row_item"},t.product_name),t.code?n.a.createElement("div",{className:"row_item"},"#",t.code):n.a.createElement("div",{className:"row_item"},"-"),n.a.createElement("div",{className:"row_item"},n.a.createElement("button",{disabled:t.quantity<=0,onClick:function(){return e.toggleQuantityDialog("-",t.product_name,t.quantity,t.id)}},n.a.createElement("img",{src:Ht.a,alt:"minus"})),n.a.createElement("div",null,t.quantity),n.a.createElement("button",{onClick:function(){return e.toggleQuantityDialog("+",t.product_name,t.quantity,t.id)}},n.a.createElement("img",{src:Wt.a,alt:"plus"}))),n.a.createElement("div",{className:"row_item"},"RWF",t.price),n.a.createElement("div",{className:"row_item"},"RWF",t.total_price),n.a.createElement("div",{className:"row_item"},t.deleted&&t.code?n.a.createElement("div",{className:"btn_text"},"Not available"):t.code?n.a.createElement("div",{className:"row_item"},n.a.createElement("button",{className:"user"!==h?"green_text btn_text":"hided",disabled:"user"===h,onClick:function(){return e.toggleRequestDialog(t.product_name,t.quantity,t.id)}},"REQUEST SUPPLY")):n.a.createElement("div",{className:"row_item"},"-"),n.a.createElement("button",{className:l&&d===t.id?"btn_arrow_open btn_arrow":"btn_arrow",onClick:function(){return d===t.id?e.closeMenu(t.id):e.openMenu(t.id)}},n.a.createElement("img",{src:Zt.a,alt:"roll_down"})))),n.a.createElement("div",{className:l&&d===t.id?"info info_open":"info"},n.a.createElement("div",{className:"row_item"},n.a.createElement("span",null,"Category"),"user"!==h?n.a.createElement(x.a,{className:"user"!==h?"":"hided",to:"/main/catalog/category/".concat(t.product_subcategory[0][t.product_subcategory[0].length-1].id)},t.product_subcategory[1]):n.a.createElement("a",{className:"hided"},t.product_subcategory[1])),n.a.createElement("div",{className:"row_item"},n.a.createElement("span",null,"Auto supply"),t.auto_supply?n.a.createElement("img",{src:Gt.a,alt:"ok"}):n.a.createElement("img",{src:Yt.a,alt:"no"})),n.a.createElement("div",{className:"row_item"},n.a.createElement("span",null,"Min. qty"),t.deleted?"-":t.min_supply_quantity),n.a.createElement("div",{className:"row_item"},n.a.createElement("span",null,"Auto supply qty"),t.deleted?"-":t.supply_quantity)))}))),y<10?null:n.a.createElement("div",{className:"pagination_info_wrapper"},n.a.createElement("div",{className:"pagination_block"},n.a.createElement(le,{active:o,pageCount:+g,onChange:this.pagFunc})),n.a.createElement("div",{className:"info"},"Displaying page ",o+1," of ",g,", items ",10*(o+1)-9," to ",10*(o+1)>y?y:10*(o+1)," of ",y)))),"1"===a&&n.a.createElement("div",{className:"out_of_stock_table"},n.a.createElement("div",{className:"table_container transactions_columns"},n.a.createElement("div",{className:"table_header"},n.a.createElement("div",{className:"table_row"},n.a.createElement("div",{className:"row_item"},"Name"),n.a.createElement("div",{className:"row_item"},"Category"),n.a.createElement("div",{className:"row_item"},"Code"),n.a.createElement("div",{className:"row_item"},n.a.createElement("button",{className:"btn_sort stub"},"Quantity",n.a.createElement("div",{className:"sort"}))),n.a.createElement("div",{className:"row_item"},"Unit value"),n.a.createElement("div",{className:"row_item"},"Actions"))),n.a.createElement("div",{className:"table_body"},f.results.map(function(t,a){return n.a.createElement("div",{className:"table_row",key:a},n.a.createElement("div",{className:"row_item"},t.product_name),n.a.createElement("div",{className:"row_item"},"user"!==h?n.a.createElement(x.a,{className:"user"!==h?"":"hided",to:"/main/catalog/category/".concat(t.product_subcategory[0][t.product_subcategory[0].length-1].id)},t.product_subcategory[1]):n.a.createElement("a",{className:"hided"},t.product_subcategory[1])),t.code?n.a.createElement("div",{className:"row_item"},"#",t.code):n.a.createElement("div",{className:"row_item"},"-"),n.a.createElement("div",{className:"row_item"},n.a.createElement("button",{disabled:t.quantity<=0,onClick:function(){return e.toggleQuantityDialog("-",t.product_name,t.quantity,t.id)}},n.a.createElement("img",{style:{opacity:".4"},src:Ht.a,alt:"minus"})),n.a.createElement("div",null,t.quantity),n.a.createElement("button",{onClick:function(){return e.toggleQuantityDialog("+",t.product_name,t.quantity,t.id,t.id)}},n.a.createElement("img",{src:Wt.a,alt:"plus"}))),n.a.createElement("div",{className:"row_item"},"RWF",t.price),t.code?n.a.createElement("div",{className:"row_item"},n.a.createElement("button",{className:"user"!==h?"green_text btn_text":"hided",disabled:"user"===h,onClick:function(){return e.toggleRequestDialog(t.product_name,t.quantity,t.id)}},"Request supply")):n.a.createElement("div",{className:"row_item"},"-"))}))),y<10?null:n.a.createElement("div",{className:"pagination_info_wrapper"},n.a.createElement("div",{className:"pagination_block"},n.a.createElement(le,{active:o,pageCount:+g,onChange:this.doRequest})),n.a.createElement("div",{className:"info"},"Displaying page ",o+1," of ",g,", items ",10*(o+1)-9," to ",10*(o+1)>y?y:10*(o+1)," of ",y)))):n.a.createElement("h3",{className:"empty_list"},"The list is empty")),n.a.createElement(la,{toggler:this.toggleQuantityDialog,product_quantity:p,product_name:m,sign:u,state:c,product_id:d,startValue:"",activePage:o,doRequest:this.doRequest}),n.a.createElement(sa,{toggler:this.toggleRequestDialog,product_quantity:p,product_name:m,state:s,product_id:d,startValue:""}))}}]),t}(r.Component);var ma=Object(c.c)(function(e){return{stock_list:e.stock.stock_list,search_list:e.stock.search_list}},function(e){return Object(s.b)({getStock:ea,searchStock:aa,getSearchList:ta},e)})(ua);function pa(e,t){return{type:xe,payload:{client:"default",request:{url:"/clinic-logs/?page=".concat(t,"&page_size=10").concat(e?"&activity=".concat(e):""),method:"get"}}}}a(366);var da=function(e){function t(){var e,a;Object(N.a)(this,t);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(o)))).state={activePage:1,loading:!0,activity:{label:n.a.createElement("div",{className:"status"},n.a.createElement("div",null,"All activities")),value:""},activities_list:[{label:n.a.createElement("div",{className:"status"},n.a.createElement("div",null,"All activities")),value:""},{label:n.a.createElement("div",{className:"status"},n.a.createElement("div",null,"Auto supply request")),value:"auto_supply_requests"},{label:n.a.createElement("div",{className:"status"},n.a.createElement("div",null,"Manual supply request")),value:"supply_requests"},{label:n.a.createElement("div",{className:"status"},n.a.createElement("div",null,"Product addition")),value:"add_products"},{label:n.a.createElement("div",{className:"status"},n.a.createElement("div",null,"Product removal")),value:"remove_products"}]},a.doRequest=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;(0,a.props.getActivity)(a.state.activity.value,e).then(function(e){e.payload&&e.payload.status&&200===e.payload.status&&a.setState({loading:!1})})},a.changePage=function(e){a.setState({activePage:e.selected+1}),a.doRequest(e.selected+1)},a.handleChange=function(e){return function(t){a.setState(Object(yt.a)({},e,t)),a.timer=a.timeout=setTimeout(function(){a.doRequest()},0)}},a}return Object(w.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.doRequest()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this.state,t=e.activePage,a=e.activities_list,r=e.activity,o=e.loading,l=this.props.activityLog;return o?null:n.a.createElement("div",{className:"activity_page content_block"},n.a.createElement("div",{className:"title_page"},"Activity"),n.a.createElement("div",{className:"activity_block"},n.a.createElement("div",{className:"panel_activity"},n.a.createElement(vt.a,{className:"select_wrapper"},n.a.createElement(Ct,{value:r,options:a,change:this.handleChange("activity"),isClearable:"false",isSearchable:!1}))),n.a.createElement("div",{className:"activity_info_wrapper"},l.results&&l.results.length>0?l.results.map(function(e){return n.a.createElement("div",{key:e.id},n.a.createElement("div",null,n.a.createElement("span",null,st()(e.date).format("DD/MM/YYYY HH:mm")),n.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.text}})))}):n.a.createElement("h3",null,"The list is empty.")),l.count>10&&n.a.createElement("div",{className:"pagination_info_wrapper"},n.a.createElement("div",{className:"pagination_block"},n.a.createElement(le,{current:t,pageCount:l.total_pages,onChange:this.changePage})),n.a.createElement("div",{className:"info"},"Displaying page ",t," of ",l.total_pages,", items ",10*t-9," to ",10*t>l.count?l.count:10*t," of ",l.count))))}}]),t}(r.Component);var Ea=Object(c.c)(function(e){return{activityLog:e.activity.activityLog}},function(e){return Object(s.b)({getActivity:pa},e)})(da),ga=function(e){function t(){return Object(N.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.match,a=e.history,o=localStorage.role;return localStorage.token?n.a.createElement(r.Fragment,null,n.a.createElement(D,{history:a,match:t}),n.a.createElement("div",{className:"page"},n.a.createElement(B,{location:a.location}),n.a.createElement(b.a,null,n.a.createElement(f.a,{path:"".concat(t.url,"/dashboard"),render:function(){return"user"!==o?n.a.createElement(dt,null):n.a.createElement(_.a,{to:"/main/stock-management"})}}),n.a.createElement(f.a,{path:"".concat(t.url,"/activity"),exact:!0,render:function(){return"user"!==o?n.a.createElement(Ea,null):n.a.createElement(_.a,{to:"/main/stock-management"})}}),n.a.createElement(f.a,{path:"".concat(t.url,"/catalog"),exact:!0,render:function(){return"user"!==o?n.a.createElement(lt,{history:a,catalog:!0}):n.a.createElement(_.a,{to:"/main/stock-management"})}}),n.a.createElement(f.a,{path:"".concat(t.url,"/catalog/category/:id"),render:function(){return"user"!==o?n.a.createElement(lt,{history:a,catalog:!1}):n.a.createElement(_.a,{to:"/main/stock-management"})}}),n.a.createElement(f.a,{path:"".concat(t.url,"/user-management"),exact:!0,render:function(){return"clinic"===o?n.a.createElement(Lt,null):n.a.createElement(_.a,{to:"/main/stock-management"})}}),n.a.createElement(f.a,{path:"".concat(t.url,"/stock-management"),component:ma}),n.a.createElement(f.a,{render:function(){return n.a.createElement("p",null,"Not found")}})))):n.a.createElement(_.a,{to:"/auth"})}}]),t}(r.Component);var ya=Object(c.c)(function(e){return{}},function(e){return Object(s.b)({},e)})(ga),ha=a(88),va=a(401),ba=a(397),fa=(a(368),function(e){var t=e.children,a=e.variant,r=void 0===a?"contained":a,o=e.type,l=void 0===o?"button":o,c=e.to,s=e.formAction,i=e.disabled,u=e.onClick,m=e.loading,p=e.classes,d=void 0===p?"":p;return"link"===l?n.a.createElement("div",{className:"default_button_wrapper"},n.a.createElement(va.a,{component:x.a,to:c,disabled:i,variant:r,classes:{root:"default_button default_button_".concat(r," ").concat(d)}},t)):n.a.createElement("div",{className:"default_button_wrapper"},n.a.createElement(va.a,{type:s?"submit":"button",variant:r,disabled:i,onClick:u,classes:{root:"default_button default_button_".concat(r," ").concat(d)}},m?n.a.createElement(ba.a,{size:24}):t))});function _a(e){return{type:Ee,payload:{client:"default",request:{url:"/auth/hospital-credential/",method:"post",data:e}}}}function Na(e){return{type:ge,payload:{client:"default",request:{url:"/auth/owner/",method:"post",data:e}}}}function Sa(e){return{type:ye,payload:{client:"default",request:{url:"/auth/login/",method:"post",data:e}}}}function Ca(e){return{type:he,payload:{client:"default",request:{url:"/auth/reset-password/",method:"post",data:e}}}}function ka(e){return{type:ve,payload:{client:"default",request:{url:"/auth/reset-password/approve/",method:"post",data:e}}}}function wa(e,t){return{type:be,payload:{client:"default",request:{url:"/auth/message/".concat(t,"/"),method:"PUT",data:e}}}}var Ta=n.a.createRef(),qa=function(e){function t(){var e,a;Object(N.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(n)))).state={reCaptcha:!1,loading:!1},a.submitForm=function(e){var t=a.props,r=t.postLogin,n=t.history,o=t.resetErrorUsers;a.setState({loading:!0}),e.site="user",e.recaptcha=a.state.recaptchaKey,r(e).then(function(e){e.payload&&e.payload.status&&200===e.payload.status?(localStorage.token=e.payload.data.token,localStorage.email=e.payload.data.email,localStorage.username=e.payload.data.username,localStorage.role=e.payload.data.role,o(),n.push("/main/dashboard/")):(a.setState({loading:!1,reCaptcha:!1}),Ta.current.reset())})},a.onChange=function(e){a.setState({reCaptcha:!0,recaptchaKey:e})},a}return Object(w.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.submitting,r=e.pristine,o=e.valid,l=e.error_login,c=e.resetErrorUsers,s=this.state,i=s.reCaptcha,u=s.loading;return n.a.createElement("form",{onSubmit:t(this.submitForm)},n.a.createElement("h3",{className:"auth-block_head"},"Sign in to VIEBEG"),n.a.createElement("h3",{className:"auth-block_descriptions"},"Provide your credentials below"),n.a.createElement("div",{className:"block_field"},n.a.createElement("span",null,"Email"),n.a.createElement(ht.a,{name:"email",type:"text",component:kt,placeholder:"Type here\u2026"}),n.a.createElement("span",{className:"back_error"},!!l&&l.email)),n.a.createElement("div",{className:"block_custom_field"},n.a.createElement("div",{className:"block_field"},n.a.createElement("div",{className:"password_reset"},n.a.createElement("span",null,"Password"),n.a.createElement(x.a,{to:"/auth/password-recovery/first-step"},"Forgot password?")),n.a.createElement(ht.a,{name:"password",type:"password",component:kt,placeholder:"Type here\u2026",onChange:function(e){return l?c():e}}),n.a.createElement("span",{className:"back_error"},!!l&&l.password)),n.a.createElement("div",{className:"captcha_block"},n.a.createElement(ha.a,{theme:"light",ref:Ta,sitekey:"6LfWmNQUAAAAAHjBqN29AftN2ntLZ5858Yi6M085",onChange:this.onChange}),n.a.createElement("span",{className:"back_error"},!!l&&l.recaptcha))),n.a.createElement("div",{className:"auth_btn_wrapper"},n.a.createElement(fa,{variant:"contained",disabled:!i||(a||r||!o),loading:u,formAction:!0,type:"submit"},"Sign in")),n.a.createElement("div",{className:"info_auth"},n.a.createElement("span",null,"Don\u2019t have a VIEBEG account yet?"),n.a.createElement(x.a,{to:"/auth/sign-up"},"SIGN UP")))}}]),t}(r.Component);qa=Object(Et.a)({form:"LoginForm",validate:function(e){var t={};return e.company?e.company.length<3&&(t.company="Must be 3 characters or more"):t.company="Required",e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,5}$/i.test(e.email)||(t.email="Invalid email"):t.email="Required",e.password?e.password.length<8&&(t.password="Must be 8 characters or more"):t.password="Required",e.phone||(t.phone="Required"),e.address||(t.address="Required"),t}})(qa);var Oa=Object(c.c)(function(e,t){return{error_login:e.auth.error}},function(e){return Object(s.b)({postLogin:Sa,resetErrorUsers:Dt},e)})(qa),Da=n.a.createRef(),xa=function(e){function t(){var e,a;Object(N.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(n)))).state={reCaptcha:!1,loading:!1},a.submitForm=function(e){var t=a.props,r=t.postRegisterFirstStep,n=t.history,o=t.resetErrorUsers;a.setState({loading:!0}),e.recaptcha=a.state.recaptchaKey,r(e).then(function(t){t.payload&&t.payload.status&&200===t.payload.status?(localStorage.setItem("clinic_info",JSON.stringify(e)),n.push("/auth/sign-up/second-step"),o()):(a.setState({loading:!1,reCaptcha:!1}),Da.current.reset())})},a.onChange=function(e){a.setState({reCaptcha:!0,recaptchaKey:e})},a}return Object(w.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.props.resetErrorUsers}},{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.submitting,r=e.pristine,o=e.valid,l=e.step_fail,c=e.resetErrorUsers,s=this.state,i=s.reCaptcha,u=s.loading;return console.log(l),n.a.createElement("form",{onSubmit:t(this.submitForm)},n.a.createElement("h3",{className:"auth-block_head"},"Sign up to VIEBEG"),n.a.createElement("h3",{className:"auth-block_descriptions"},"Please, fill out the form about your business below"),n.a.createElement("div",{className:"block_field"},n.a.createElement("span",null,"Email"),n.a.createElement(ht.a,{name:"clinic_email",type:"text",component:kt,placeholder:"Type here\u2026"}),n.a.createElement("span",{className:"back_error"},!!l&&l.clinic_email)),n.a.createElement("div",{className:"block_custom_field"},n.a.createElement("div",{className:"block_field"},n.a.createElement("span",null,"Hospital name"),n.a.createElement(ht.a,{name:"clinic_name",type:"text",component:kt,placeholder:"Type here\u2026"}),n.a.createElement("span",{className:"back_error"},!!l&&l.clinic_name)),n.a.createElement("div",{className:"captcha_block"},n.a.createElement(ha.a,{theme:"light",ref:Da,sitekey:"6LfWmNQUAAAAAHjBqN29AftN2ntLZ5858Yi6M085",onChange:this.onChange}),n.a.createElement("span",{className:"back_error"},!!l&&l.recaptcha))),n.a.createElement("div",{className:"auth_btn_wrapper"},n.a.createElement(fa,{variant:"contained",disabled:!i||(a||r||!o),loading:u,formAction:!0,type:"submit"},"Next")),n.a.createElement("div",{className:"info_auth"},n.a.createElement("span",null,"Already a VIEBEG member?"),n.a.createElement(x.a,{to:"/auth/sign-in",onClick:c},"SIGN IN")))}}]),t}(r.Component);xa=Object(Et.a)({form:"SignUp",validate:function(e){var t={};return e.company?e.company.length<3&&(t.company="Must be 3 characters or more"):t.company="Required",e.clinic_email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,5}$/i.test(e.clinic_email)||(t.clinic_email="Invalid email"):t.clinic_email="Required",e.password?e.password.length<8&&(t.password="Must be 8 characters or more"):t.password="Required",e.phone||(t.phone="Required"),e.address||(t.address="Required"),t}})(xa);var ja=Object(c.c)(function(e,t){return{step_fail:e.auth.error}},function(e){return Object(s.b)({postRegisterFirstStep:_a,resetErrorUsers:Dt},e)})(xa),Aa=function(e){function t(){var e,a;Object(N.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(n)))).state={username:null},a.submitForm=function(e){var t=a.props,r=t.history,n=(t.hospital_credentials,t.postRegisterSecondStep),o=JSON.parse(localStorage.getItem("clinic_info"));o.email=e&&e.email?e.email:"",o.username=e&&e.full_name,o.phone=e&&e.phone?e.phone:"",n(o).then(function(e){e.payload&&e.payload.status&&201===e.payload.status&&(localStorage.setItem("clinic_id",e.payload.data.id),r.push("/auth/sign-up/third-step"))})},a}return Object(w.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.submitting,r=e.pristine,o=e.valid;return n.a.createElement("form",{onSubmit:t(this.submitForm)},n.a.createElement(x.a,{to:"/auth/sign-up",className:"back_step"},n.a.createElement("img",{src:ie.a,alt:"arrow"}),"Step 1"),n.a.createElement("h3",{className:"auth-block_head"},"Sign up to VIEBEG"),n.a.createElement("h3",{className:"auth-block_descriptions"},"Provide information about your business owner or director"),n.a.createElement("div",{className:"block_field"},n.a.createElement("span",null,"Full name"),n.a.createElement(ht.a,{name:"full_name",type:"text",component:kt,placeholder:"Type here\u2026"})),n.a.createElement("div",{className:"block_custom_field"},n.a.createElement("div",{className:"block_field"},n.a.createElement("span",null,"Email ",n.a.createElement("p",null,"(optional)")),n.a.createElement(ht.a,{name:"email",type:"text",component:kt,placeholder:"Type here\u2026"})),n.a.createElement("div",{className:"block_field custom_field_phone"},n.a.createElement("span",null,"Phone number ",n.a.createElement("p",null,"(optional)")),n.a.createElement(ht.a,{name:"phone",type:"number",component:kt,placeholder:"Type here\u2026"}))),n.a.createElement("div",{className:"auth_btn_wrapper"},n.a.createElement(fa,{variant:"contained",type:"submit",disabled:a||r||!o,formAction:!0},"Next")))}}]),t}(r.Component);Aa=Object(Et.a)({form:"SignUpStepSecondForm",validate:function(e){var t={},a=new RegExp(/^([A-Za-z '.-]+){1}$/g);return e.full_name?a.test(e.full_name)||(t.full_name="Invalid name"):t.full_name="Required",e.phone&&e.phone.length<6?t.phone="Must be from 6 characters to 16":e.phone&&e.phone.length>16&&(t.phone="Must be from 6 characters to 16"),t}})(Aa);var Pa=Object(c.c)(function(e,t){return{hospital_credentials:e.auth.hospital_credentials}},function(e){return Object(s.b)({postRegisterSecondStep:Na},e)})(Aa),Ia=function(e){function t(){var e,a;Object(N.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(n)))).state={open:!1},a.toggleDialog=function(){var e=a.props.history;a.setState(function(e){return{open:!e.open}}),a.state.open&&e.push("/auth/sign-in")},a.resetError=function(){(0,a.props.resetErrorUsers)()},a.submitForm=function(e){(0,a.props.sendMessage)({message:e.description?e.description:""},localStorage.getItem("clinic_id")).then(function(e){e.payload&&e.payload.status&&e.payload.status})},a}return Object(w.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this,t=this.state.open,a=this.props,r=a.handleSubmit,o=a.valid;return n.a.createElement("form",{onSubmit:r(this.submitForm)},n.a.createElement(x.a,{to:"/auth/sign-up/second-step",className:"back_step"},n.a.createElement("img",{src:ie.a,alt:"arrow"}),"Step 2"),n.a.createElement("h3",{className:"auth-block_head"},"Sign up to VIEBEG"),n.a.createElement("h3",{className:"auth-block_descriptions"},"We are ready to go! You can give us more information if you want."),n.a.createElement("div",{className:"block_field"},n.a.createElement("span",null,"Additional notes, 300 symbols",n.a.createElement("p",null,"(optional)")),n.a.createElement(ht.a,{name:"description",className:"textarea",component:"textarea",placeholder:"Type here..."})),n.a.createElement("div",{className:"auth_btn_wrapper"},n.a.createElement(fa,{variant:"contained",formAction:!0,onClick:this.toggleDialog,disabled:!o},"Sign up")),n.a.createElement($,{open:t,onClose:function(){return e.toggleDialog("")}},n.a.createElement("div",{className:"auth_dialog_wrapper"},n.a.createElement("div",{className:"title"},"Thank you for your registration"),n.a.createElement("div",{className:"descriptions"},"Your details have been sent to our team and are currently under review. ",n.a.createElement("br",null),"You will soon receive a confirmation with log in details."),n.a.createElement(fa,{variant:"outlined",type:"link",classes:"blue_btn",to:"/auth/sign-in",onClick:this.resetError},"ok"))))}}]),t}(r.Component);Ia=Object(Et.a)({form:"SignUpStepThirdForm",validate:function(e){var t={};return e.description&&!/^.{0,300}$/.test(e.description)&&(t.description="Maximum 300 symbols"),t}})(Ia);var Ra=Object(c.c)(null,function(e){return Object(s.b)({sendMessage:wa,resetErrorUsers:Dt},e)})(Ia),Qa=function(e){function t(){var e,a;Object(N.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(n)))).state={loading:!1},a.submitForm=function(e){var t=a.props,r=t.postResetPassword,n=t.history,o=t.resetErrorUsers;a.setState({loading:!0}),r(e).then(function(e){e.payload&&e.payload.status&&200===e.payload.status?(n.push("/auth/password-recovery/second-step/"),o()):a.setState({loading:!1})})},a}return Object(w.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.submitting,r=e.pristine,o=e.valid,l=e.step_fail,c=e.resetErrorUsers,s=this.state.loading;return n.a.createElement("form",{onSubmit:t(this.submitForm)},n.a.createElement(x.a,{to:"/auth/sign-in",onClick:c,className:"back_step"},n.a.createElement("img",{src:ie.a,alt:"arrow"}),"sign in"),n.a.createElement("h3",{className:"auth-block_head"},"Reset password"),n.a.createElement("h3",{className:"auth-block_descriptions"},"Enter your email to continue"),n.a.createElement("div",{className:"block_field"},n.a.createElement("span",null,"Email",n.a.createElement("span",{className:"back_error"},!!l&&l.email)),n.a.createElement(ht.a,{name:"email",type:"text",component:kt,placeholder:"Type here\u2026"})),n.a.createElement("div",{className:"auth_btn_wrapper"},n.a.createElement(fa,{variant:"contained",type:"submit",disabled:a||r||!o,loading:s,formAction:!0},"Next")))}}]),t}(r.Component);Qa=Object(Et.a)({form:"FirstStepForm",validate:function(e){var t={};return e.company?e.company.length<3&&(t.company="Must be 3 characters or more"):t.company="Required",e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,5}$/i.test(e.email)||(t.email="Invalid email"):t.email="Required",e.password?e.password.length<8&&(t.password="Must be 8 characters or more"):t.password="Required",e.phone||(t.phone="Required"),e.address||(t.address="Required"),t}})(Qa);var Ua=Object(c.c)(function(e,t){return{step_fail:e.auth.error}},function(e){return Object(s.b)({postResetPassword:Ca,resetErrorUsers:Dt},e)})(Qa),La=a(190),Fa=a.n(La),Ga=function(e){function t(){return Object(N.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"block_custom_auth_page"},n.a.createElement(x.a,{to:"/auth/sign-in",className:"back_step"},n.a.createElement("img",{src:ie.a,alt:"arrow"}),"sign in"),n.a.createElement("h3",{className:"auth-block_head"},"Reset password"),n.a.createElement("h3",{className:"auth-block_descriptions"},"We have sent you an email with a link to reset your password"),n.a.createElement("div",{className:"block_key"},n.a.createElement("img",{src:Fa.a,alt:"email"})))}}]),t}(r.Component);var Ma=Object(c.c)(null,function(e){return Object(s.b)({},e)})(Ga),Ya=function(e){function t(){var e,a;Object(N.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(n)))).state={loading:!1},a.submitForm=function(e){var t=a.props,r=t.postPasswordApprove,n=t.location.search,o=t.history;a.setState({loading:!0}),r({security_token:new URLSearchParams(n.substring(1)).get("security_token"),password:e.password,password_check:e.password_check}).then(function(e){e.payload&&e.payload.status&&200===e.payload.status&&(a.setState({loading:!1}),o.push("/auth/password-recovery/fourth-step/"))})},a}return Object(w.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,a=e.submitting,r=e.pristine,o=e.valid,l=e.security_token,c=this.state.loading;return n.a.createElement("form",{onSubmit:t(this.submitForm)},n.a.createElement("h3",{className:"auth-block_head"},"Password change"),n.a.createElement("h3",{className:"auth-block_descriptions"},"Enter and confirm your new password"),n.a.createElement("div",{className:"block_field"},n.a.createElement("span",null,"New password"),n.a.createElement(ht.a,{name:"password",type:"password",component:kt,placeholder:"Type here\u2026"})),n.a.createElement("div",{className:"block_field"},n.a.createElement("span",null,"Confirm password"),n.a.createElement(ht.a,{name:"password_check",type:"password",component:kt,placeholder:"Type here\u2026"})),n.a.createElement("div",{className:"auth_btn_wrapper"},n.a.createElement(fa,{variant:"contained",disabled:a||r||!o,loading:c,formAction:!0,type:"submit"},"Next")),n.a.createElement("span",{className:"back_error third"},!!l&&l.security_token))}}]),t}(r.Component);Ya=Object(Et.a)({form:"ThirdStepForm",validate:function(e){var t={};return e.password?e.password.length<8&&(t.password="Must be 8 characters or more"):t.password="Required",e.password_check?e.password_check!==e.password&&(t.password_check="This password does not match the password below"):t.password_check="Required",t}})(Ya);var Va=Object(c.c)(function(e,t){return{security_token:e.auth.error}},function(e){return Object(s.b)({postPasswordApprove:ka},e)})(Ya),Ha=a(191),Ba=a.n(Ha),Wa=function(e){function t(){return Object(N.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"block_custom_auth_page"},n.a.createElement("h3",{className:"auth-block_head"},"Password change"),n.a.createElement("h3",{className:"auth-block_descriptions"},"Your new password have been set successfully. ",n.a.createElement("br",null),"Now you can sign in."),n.a.createElement("div",{className:"block_key"},n.a.createElement("img",{src:Ba.a,alt:"password"})),n.a.createElement("div",{className:"auth_btn_wrapper"},n.a.createElement(fa,{variant:"contained",type:"link",to:"/"},"Sign in")))}}]),t}(r.Component);var Ka=Object(c.c)(null,function(e){return Object(s.b)({},e)})(Wa),Za=a(192),za=a.n(Za),$a=(a(370),function(e){var t=e.match;return localStorage.token?n.a.createElement(_.a,{to:"/main/dashboard"}):n.a.createElement(r.Fragment,null,n.a.createElement("main",{className:"auth_container"},n.a.createElement("div",{className:"auth-box"},n.a.createElement("div",{className:"auth_bg"},n.a.createElement("div",{className:"auth_logo"},n.a.createElement("img",{src:P.a,alt:"logo"})),n.a.createElement("img",{className:"bgImg",src:za.a,alt:"bgImg"})),n.a.createElement("div",{className:"auth_content"},n.a.createElement(b.a,null,n.a.createElement(f.a,{path:"".concat(t.url),exact:!0,component:Oa}),n.a.createElement(f.a,{path:"".concat(t.url,"/sign-in"),exact:!0,component:Oa}),n.a.createElement(f.a,{path:"".concat(t.url,"/sign-up"),exact:!0,component:ja}),n.a.createElement(f.a,{path:"".concat(t.url,"/sign-up/second-step"),exact:!0,component:Pa}),n.a.createElement(f.a,{path:"".concat(t.url,"/sign-up/third-step"),exact:!0,component:Ra}),n.a.createElement(f.a,{path:"".concat(t.url,"/password-recovery/first-step"),exact:!0,component:Ua}),n.a.createElement(f.a,{path:"".concat(t.url,"/password-recovery/second-step"),exact:!0,component:Ma}),n.a.createElement(f.a,{path:"".concat(t.url,"/reset-password/approve"),component:Va}),n.a.createElement(f.a,{path:"".concat(t.url,"/password-recovery/fourth-step"),exact:!0,component:Ka}),n.a.createElement(f.a,{render:function(){return n.a.createElement("p",null,"Not found")}}))))))}),Ja=n.a.createElement(v,null,n.a.createElement(b.a,null,n.a.createElement(f.a,{path:"/",exact:!0,render:function(){return localStorage.token?n.a.createElement(_.a,{to:"/main/dashboard"}):n.a.createElement(_.a,{to:"/auth/sign-in"})}}),n.a.createElement(f.a,{path:"/auth",component:$a}),n.a.createElement(f.a,{path:"/main",component:ya}),n.a.createElement(f.a,{render:function(){return n.a.createElement("p",null,"Not found")}}))),Xa=a(405),er={hospital_credentials:{},error:{}},tr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:er,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGISTER_FIRST_STEP_SUCCESS":return Object(gt.a)({},e,{hospital_credentials:t.payload.data});case"REGISTER_FIRST_STEP_FAIL":case"LOGIN_FAIL":case"CHANGE_PASSWORD_FAIL":case"RESET_PASSWORD_FAIL":return Object(gt.a)({},e,{error:t.error.response.data});case Ce:return Object(gt.a)({},e,{error:{}});default:return e}},ar={users_list:{},error:{}},rr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ar,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USERS_LIST_SUCCESS":return Object(gt.a)({},e,{users_list:t.payload.data});case"POST_ADD_USER_FAIL":case"PATCH_USER_FAIL":return Object(gt.a)({},e,{error:t.error.response.data});case Ce:return Object(gt.a)({},e,{error:{}});default:return e}},nr={},or=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nr;return(arguments.length>1?arguments[1]:void 0).type,e},lr={clinicLog:[],clinicDashBoard:[]},cr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CLINIC_LOG_SUCCESS":return Object(gt.a)({},e,{clinicLog:t.payload.data.results});case"GET_CLINIC_DASH_BOARD_SUCCESS":return Object(gt.a)({},e,{clinicDashBoard:t.payload.data});default:return e}},sr={activityLog:[]},ir=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ACTIVITY_SUCCESS":return Object(gt.a)({},e,{activityLog:t.payload.data});default:return e}},ur={stock_list:{},search_list:{},error:{}},mr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ur,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_STOCK_SUCCESS":return Object(gt.a)({},e,{stock_list:t.payload.data});case"SEARCH_STOCK_SUCCESS":return Object(gt.a)({},e,{search_list:t.payload.data});case"POST_REQUEST_FAIL":case"PATCH_QUANTITY_FAIL":return Object(gt.a)({},e,{error:t.error.response.data});default:return e}},pr=function(e){return Object(s.c)({router:Object(m.b)(e),form:Xa.a,auth:tr,users:rr,catalog:or,dashboard:cr,activity:ir,stock:mr})},dr={interceptors:{request:[function(e,t){if(localStorage.token||localStorage.token_res){var a=localStorage.token?localStorage.token:localStorage.token_res;t.headers.Authorization="Token "+a}return t}]}},Er=Object(i.a)(),gr=Object(u.a)(Er),yr=Object(s.a)(Object(p.multiClientMiddleware)(y,dr),gr)(s.d)(pr(Er),{},window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e});l.a.render(n.a.createElement(c.a,{store:yr},n.a.createElement(m.a,{history:Er,children:Ja})),document.getElementById("wrapper"))},43:function(e,t,a){e.exports=a.p+"static/media/Path.870abc01.svg"},98:function(e,t,a){e.exports=a.p+"static/media/new logo.7a19b09f.svg"}},[[199,2,1]]]);
//# sourceMappingURL=main.31e93efb.chunk.js.map